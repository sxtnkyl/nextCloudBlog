(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3935],{5112:function(e,t,n){"use strict";n.d(t,{b:function(){return Qn}});var r=n(5914),i=n(5387),o={keyPrefix:"aws-amplify-cache",capacityInBytes:1048576,itemMaxSize:21e4,defaultTTL:2592e5,defaultPriority:5,warningThreshold:.8,storage:(new(n(6648).c4)).getStorage()};function s(e){var t=0;t=e.length;for(var n=e.length;n>=0;n-=1){var r=e.charCodeAt(n);r>127&&r<=2047?t+=1:r>2047&&r<=65535&&(t+=2),r>=56320&&r<=57343&&(n-=1)}return t}function a(){return(new Date).getTime()}function c(e){return Number.isInteger?Number.isInteger(e):function(e){return"number"===typeof e&&isFinite(e)&&Math.floor(e)===e}(e)}var u={},l=(function(){function e(){}e.clear=function(){u={}},e.getItem=function(e){return u[e]||null},e.setItem=function(e,t){u[e]=t},e.removeItem=function(e){delete u[e]}}(),n(9719)),f=new l.k("StorageCache"),p=function(){function e(e){this.config=Object.assign({},e),this.cacheCurSizeKey=this.config.keyPrefix+"CurSize",this.checkConfig()}return e.prototype.getModuleName=function(){return"Cache"},e.prototype.checkConfig=function(){c(this.config.capacityInBytes)||(f.error("Invalid parameter: capacityInBytes. It should be an Integer. Setting back to default."),this.config.capacityInBytes=o.capacityInBytes),c(this.config.itemMaxSize)||(f.error("Invalid parameter: itemMaxSize. It should be an Integer. Setting back to default."),this.config.itemMaxSize=o.itemMaxSize),c(this.config.defaultTTL)||(f.error("Invalid parameter: defaultTTL. It should be an Integer. Setting back to default."),this.config.defaultTTL=o.defaultTTL),c(this.config.defaultPriority)||(f.error("Invalid parameter: defaultPriority. It should be an Integer. Setting back to default."),this.config.defaultPriority=o.defaultPriority),this.config.itemMaxSize>this.config.capacityInBytes&&(f.error("Invalid parameter: itemMaxSize. It should be smaller than capacityInBytes. Setting back to default."),this.config.itemMaxSize=o.itemMaxSize),(this.config.defaultPriority>5||this.config.defaultPriority<1)&&(f.error("Invalid parameter: defaultPriority. It should be between 1 and 5. Setting back to default."),this.config.defaultPriority=o.defaultPriority),(Number(this.config.warningThreshold)>1||Number(this.config.warningThreshold)<0)&&(f.error("Invalid parameter: warningThreshold. It should be between 0 and 1. Setting back to default."),this.config.warningThreshold=o.warningThreshold);this.config.capacityInBytes>5242880&&(f.error("Cache Capacity should be less than 5MB. Setting back to default. Setting back to default."),this.config.capacityInBytes=o.capacityInBytes)},e.prototype.fillCacheItem=function(e,t,n){var r={key:e,data:t,timestamp:a(),visitedTime:a(),priority:n.priority,expires:n.expires,type:typeof t,byteSize:0};return r.byteSize=s(JSON.stringify(r)),r.byteSize=s(JSON.stringify(r)),r},e.prototype.configure=function(e){return e?(e.keyPrefix&&f.warn("Don't try to configure keyPrefix!"),this.config=Object.assign({},this.config,e,e.Cache),this.checkConfig(),this.config):this.config},e}(),h=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),d=new l.k("Cache"),y=new(function(e){function t(t){var n=this,r=t?Object.assign({},o,t):o;return(n=e.call(this,r)||this).config.storage=r.storage,n.getItem=n.getItem.bind(n),n.setItem=n.setItem.bind(n),n.removeItem=n.removeItem.bind(n),n}return h(t,e),t.prototype._decreaseCurSizeInBytes=function(e){var t=this.getCacheCurSize();this.config.storage.setItem(this.cacheCurSizeKey,(t-e).toString())},t.prototype._increaseCurSizeInBytes=function(e){var t=this.getCacheCurSize();this.config.storage.setItem(this.cacheCurSizeKey,(t+e).toString())},t.prototype._refreshItem=function(e,t){return e.visitedTime=a(),this.config.storage.setItem(t,JSON.stringify(e)),e},t.prototype._isExpired=function(e){var t=this.config.storage.getItem(e),n=JSON.parse(t);return a()>=n.expires},t.prototype._removeItem=function(e,t){var n=t||JSON.parse(this.config.storage.getItem(e)).byteSize;this._decreaseCurSizeInBytes(n),this.config.storage.removeItem(e)},t.prototype._setItem=function(e,t){this._increaseCurSizeInBytes(t.byteSize);try{this.config.storage.setItem(e,JSON.stringify(t))}catch(n){this._decreaseCurSizeInBytes(t.byteSize),d.error("Failed to set item "+n)}},t.prototype._sizeToPop=function(e){var t=this.getCacheCurSize()+e-this.config.capacityInBytes,n=(1-this.config.warningThreshold)*this.config.capacityInBytes;return t>n?t:n},t.prototype._isCacheFull=function(e){return e+this.getCacheCurSize()>this.config.capacityInBytes},t.prototype._findValidKeys=function(){for(var e=[],t=[],n=0;n<this.config.storage.length;n+=1)t.push(this.config.storage.key(n));for(n=0;n<t.length;n+=1){var r=t[n];0===r.indexOf(this.config.keyPrefix)&&r!==this.cacheCurSizeKey&&(this._isExpired(r)?this._removeItem(r):e.push(r))}return e},t.prototype._popOutItems=function(e,t){for(var n=[],r=t,i=0;i<e.length;i+=1){var o=this.config.storage.getItem(e[i]);if(null!=o){var s=JSON.parse(o);n.push(s)}}n.sort((function(e,t){return e.priority>t.priority?-1:e.priority<t.priority?1:e.visitedTime<t.visitedTime?-1:1}));for(i=0;i<n.length;i+=1)if(this._removeItem(n[i].key,n[i].byteSize),(r-=n[i].byteSize)<=0)return},t.prototype.setItem=function(e,t,n){d.log("Set item: key is "+e+", value is "+t+" with options: "+n);var r=this.config.keyPrefix+e;if(r!==this.config.keyPrefix&&r!==this.cacheCurSizeKey)if("undefined"!==typeof t){var i={priority:n&&void 0!==n.priority?n.priority:this.config.defaultPriority,expires:n&&void 0!==n.expires?n.expires:this.config.defaultTTL+a()};if(i.priority<1||i.priority>5)d.warn("Invalid parameter: priority due to out or range. It should be within 1 and 5.");else{var o=this.fillCacheItem(r,t,i);if(o.byteSize>this.config.itemMaxSize)d.warn("Item with key: "+e+" you are trying to put into is too big!");else try{var s=this.config.storage.getItem(r);if(s&&this._removeItem(r,JSON.parse(s).byteSize),this._isCacheFull(o.byteSize)){var c=this._findValidKeys();if(this._isCacheFull(o.byteSize)){var u=this._sizeToPop(o.byteSize);this._popOutItems(c,u)}}this._setItem(r,o)}catch(l){d.warn("setItem failed! "+l)}}}else d.warn("The value of item should not be undefined!");else d.warn("Invalid key: should not be empty or 'CurSize'")},t.prototype.getItem=function(e,t){d.log("Get item: key is "+e+" with options "+t);var n=null,r=this.config.keyPrefix+e;if(r===this.config.keyPrefix||r===this.cacheCurSizeKey)return d.warn("Invalid key: should not be empty or 'CurSize'"),null;try{if(null!=(n=this.config.storage.getItem(r))){if(!this._isExpired(r)){var i=JSON.parse(n);return(i=this._refreshItem(i,r)).data}this._removeItem(r,JSON.parse(n).byteSize),n=null}if(t&&void 0!==t.callback){var o=t.callback();return null!==o&&this.setItem(e,o,t),o}return null}catch(s){return d.warn("getItem failed! "+s),null}},t.prototype.removeItem=function(e){d.log("Remove item: key is "+e);var t=this.config.keyPrefix+e;if(t!==this.config.keyPrefix&&t!==this.cacheCurSizeKey)try{var n=this.config.storage.getItem(t);n&&this._removeItem(t,JSON.parse(n).byteSize)}catch(r){d.warn("removeItem failed! "+r)}},t.prototype.clear=function(){d.log("Clear Cache");for(var e=[],t=0;t<this.config.storage.length;t+=1){var n=this.config.storage.key(t);0===n.indexOf(this.config.keyPrefix)&&e.push(n)}try{for(t=0;t<e.length;t+=1)this.config.storage.removeItem(e[t])}catch(r){d.warn("clear failed! "+r)}},t.prototype.getAllKeys=function(){for(var e=[],t=0;t<this.config.storage.length;t+=1){var n=this.config.storage.key(t);0===n.indexOf(this.config.keyPrefix)&&n!==this.cacheCurSizeKey&&e.push(n.substring(this.config.keyPrefix.length))}return e},t.prototype.getCacheCurSize=function(){var e=this.config.storage.getItem(this.cacheCurSizeKey);return e||(this.config.storage.setItem(this.cacheCurSizeKey,"0"),e="0"),Number(e)},t.prototype.createInstance=function(e){return e.keyPrefix&&e.keyPrefix!==o.keyPrefix||(d.error("invalid keyPrefix, setting keyPrefix with timeStamp"),e.keyPrefix=a.toString()),new t(e)},t}(p)),v=y;i.dQ.register(y);var g=n(7585),_=n(9270),b=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},m={clockOffset:0,getDateWithClockOffset:function(){return m.clockOffset?new Date((new Date).getTime()+m.clockOffset):new Date},getClockOffset:function(){return m.clockOffset},getHeaderStringFromDate:function(e){return void 0===e&&(e=m.getDateWithClockOffset()),e.toISOString().replace(/[:\-]|\.\d{3}/g,"")},getDateFromHeaderString:function(e){var t=b(e.match(/^(\d{4})(\d{2})(\d{2})T(\d{2})(\d{2})(\d{2}).+/),7),n=t[1],r=t[2],i=t[3],o=t[4],s=t[5],a=t[6];return new Date(Date.UTC(Number(n),Number(r)-1,Number(i),Number(o),Number(s),Number(a)))},isClockSkewed:function(e){return Math.abs(e.getTime()-m.getDateWithClockOffset().getTime())>=3e5},isClockSkewError:function(e){if(!e.response||!e.response.headers)return!1;var t=e.response.headers;return Boolean(["BadRequestException","InvalidSignatureException"].includes(t["x-amzn-errortype"])&&(t.date||t.Date))},setClockOffset:function(e){m.clockOffset=e}},E=n(1938),I=n(5644),w=n(861),T=function(){return(T=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},O=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},S=new l.k("Signer"),N="AWS4-HMAC-SHA256",A=function(e,t){var n=new E.Sha256(e);return n.update(t),n.digestSync()},k=function(e){var t=e||"",n=new E.Sha256;return n.update(t),(0,I.N)(n.digestSync())},C=function(e){return Object.keys(e).map((function(e){return e.toLowerCase()})).sort().join(";")},R=function(e){var t,n,r=(0,w.Qc)(e.url);return[e.method||"/",encodeURIComponent(r.pathname).replace(/%2F/gi,"/"),(n=r.query,n&&0!==n.length?n.split("&").map((function(e){var t=e.split("=");if(1===t.length)return e;var n=t[1].replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}));return t[0]+"="+n})).sort((function(e,t){var n=e.split("=")[0],r=t.split("=")[0];return n===r?e<t?-1:1:n<r?-1:1})).join("&"):""),(t=e.headers,t&&0!==Object.keys(t).length?Object.keys(t).map((function(e){return{key:e.toLowerCase(),value:t[e]?t[e].trim().replace(/\s+/g," "):""}})).sort((function(e,t){return e.key<t.key?-1:1})).map((function(e){return e.key+":"+e.value})).join("\n")+"\n":""),C(e.headers),k(e.data)].join("\n")},P=function(e){var t=((0,w.Qc)(e.url).host.match(/([^\.]+)\.(?:([^\.]*)\.)?amazonaws\.com$/)||[]).slice(1,3);return"es"===t[1]&&(t=t.reverse()),{service:e.service||t[0],region:e.region||t[1]}},M=function(e,t,n){return[e,t,n,"aws4_request"].join("/")},L=function(e,t,n,r){return[e,n,r,k(t)].join("\n")},D=function(e,t,n){S.debug(n);var r=A("AWS4"+e,t),i=A(r,n.region),o=A(i,n.service);return A(o,"aws4_request")},x=function(e,t){return(0,I.N)(A(e,t))},U=function(){function e(){}return e.sign=function(e,t,n){void 0===n&&(n=null),e.headers=e.headers||{};var r=m.getDateWithClockOffset().toISOString().replace(/[:\-]|\.\d{3}/g,""),i=r.substr(0,8),o=(0,w.Qc)(e.url);e.headers.host=o.host,e.headers["x-amz-date"]=r,t.session_token&&(e.headers["X-Amz-Security-Token"]=t.session_token);var s=R(e);S.debug(s);var a=n||P(e),c=M(i,a.region,a.service),u=L(N,s,r,c),l=D(t.secret_key,i,a),f=x(l,u),p=function(e,t,n,r,i){return[e+" Credential="+t+"/"+n,"SignedHeaders="+r,"Signature="+i].join(", ")}(N,t.access_key,c,C(e.headers),f);return e.headers.Authorization=p,e},e.signUrl=function(e,t,n,r){var i="object"===typeof e?e.url:e,o="object"===typeof e?e.method:"GET",s="object"===typeof e?e.body:void 0,a=m.getDateWithClockOffset().toISOString().replace(/[:\-]|\.\d{3}/g,""),c=a.substr(0,8),u=(0,w.Qc)(i,!0,!0),l=(u.search,O(u,["search"])),f={host:l.host},p=n||P({url:(0,w.WU)(l)}),h=p.region,d=p.service,y=M(c,h,d),v=t.session_token&&"iotdevicegateway"!==d,g=T(T(T({"X-Amz-Algorithm":N,"X-Amz-Credential":[t.access_key,y].join("/"),"X-Amz-Date":a.substr(0,16)},v?{"X-Amz-Security-Token":""+t.session_token}:{}),r?{"X-Amz-Expires":""+r}:{}),{"X-Amz-SignedHeaders":Object.keys(f).join(",")}),_=R({method:o,url:(0,w.WU)(T(T({},l),{query:T(T({},l.query),g)})),headers:f,data:s}),b=L(N,_,a,y),E=D(t.secret_key,c,{region:h,service:d}),I=x(E,b),S=T({"X-Amz-Signature":I},t.session_token&&{"X-Amz-Security-Token":t.session_token});return(0,w.WU)({protocol:l.protocol,slashes:!0,hostname:l.hostname,port:l.port,pathname:l.pathname,query:T(T(T({},l.query),g),S)})},e}(),B=n(9669),q=n.n(B),j=function(){return(j=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},F=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(t){o(t)}}function a(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},V=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},G=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},z=new l.k("RestClient"),K=function(){function e(e){this._region="us-east-1",this._service="execute-api",this._custom_header=void 0,this._cancelTokenMap=null,this.Credentials=g.cN,this._options=e,z.debug("API Options",this._options),null==this._cancelTokenMap&&(this._cancelTokenMap=new WeakMap)}return e.prototype.ajax=function(e,t,n){return F(this,void 0,void 0,(function(){var r,i,o,s,a,c,u,l,f,p,h,d,y,v,g=this;return V(this,(function(b){switch(b.label){case 0:return z.debug(t,e),o="us-east-1",s="execute-api",a=void 0,"string"===typeof e?(r=this._parseUrl(e),i=e):(i=e.endpoint,a=e.custom_header,o=e.region,s=e.service,r=this._parseUrl(e.endpoint)),c={method:t,url:i,host:r.host,path:r.path,headers:{},data:null,responseType:"json",timeout:0,cancelToken:null},u={},_.t4.isReactNative&&(l=_.t4.userAgent||"aws-amplify/0.1.x",u={"User-Agent":l}),f=Object.assign({},n),p=f.response,f.body&&("function"===typeof FormData&&f.body instanceof FormData?(u["Content-Type"]="multipart/form-data",c.data=f.body):(u["Content-Type"]="application/json; charset=UTF-8",c.data=JSON.stringify(f.body))),f.responseType&&(c.responseType=f.responseType),f.withCredentials&&(c.withCredentials=f.withCredentials),f.timeout&&(c.timeout=f.timeout),f.cancellableToken&&(c.cancelToken=f.cancellableToken.token),c.signerServiceInfo=f.signerServiceInfo,"function"!==typeof a?[3,2]:[4,a()];case 1:return d=b.sent(),[3,3];case 2:d=void 0,b.label=3;case 3:return h=d,c.headers=j(j(j({},u),h),f.headers),y=(0,w.Qc)(i,!0,!0),y.search,v=G(y,["search"]),c.url=(0,w.WU)(j(j({},v),{query:j(j({},v.query),f.queryStringParameters||{})})),"undefined"!==typeof c.headers.Authorization?(c.headers=Object.keys(c.headers).reduce((function(e,t){return c.headers[t]&&(e[t]=c.headers[t]),e}),{}),[2,this._request(c,p)]):[2,this.Credentials.get().then((function(r){return g._signed(j({},c),r,p,{region:o,service:s}).catch((function(r){if(m.isClockSkewError(r)){var i=r.response.headers,o=i&&(i.date||i.Date),s=new Date(o),a=m.getDateFromHeaderString(c.headers["x-amz-date"]);if(m.isClockSkewed(s))return m.setClockOffset(s.getTime()-a.getTime()),g.ajax(e,t,n)}throw r}))}),(function(e){return z.debug("No credentials available, the request will be unsigned"),g._request(c,p)}))]}}))}))},e.prototype.get=function(e,t){return this.ajax(e,"GET",t)},e.prototype.put=function(e,t){return this.ajax(e,"PUT",t)},e.prototype.patch=function(e,t){return this.ajax(e,"PATCH",t)},e.prototype.post=function(e,t){return this.ajax(e,"POST",t)},e.prototype.del=function(e,t){return this.ajax(e,"DELETE",t)},e.prototype.head=function(e,t){return this.ajax(e,"HEAD",t)},e.prototype.cancel=function(e,t){var n=this._cancelTokenMap.get(e);return n&&n.cancel(t),!0},e.prototype.isCancel=function(e){return q().isCancel(e)},e.prototype.getCancellableToken=function(){return q().CancelToken.source()},e.prototype.updateRequestToBeCancellable=function(e,t){this._cancelTokenMap.set(e,t)},e.prototype.endpoint=function(e){var t=this,n=this._options.endpoints,r="";return Array.isArray(n)?(n.forEach((function(n){n.name===e&&(r=n.endpoint,"string"===typeof n.region?t._region=n.region:"string"===typeof t._options.region&&(t._region=t._options.region),"string"===typeof n.service?t._service=n.service||"execute-api":t._service="execute-api","function"===typeof n.custom_header?t._custom_header=n.custom_header:t._custom_header=void 0)})),r):r},e.prototype._signed=function(e,t,n,r){var i=r.service,o=r.region,s=e.signerServiceInfo,a=G(e,["signerServiceInfo"]),c=o||this._region||this._options.region,u=i||this._service||this._options.service,l={secret_key:t.secretAccessKey,access_key:t.accessKeyId,session_token:t.sessionToken},f={region:c,service:u},p=Object.assign(f,s),h=U.sign(a,l,p);return h.data&&(h.body=h.data),z.debug("Signed Request: ",h),delete h.headers.host,q()(h).then((function(e){return n?e:e.data})).catch((function(e){throw z.debug(e),e}))},e.prototype._request=function(e,t){return void 0===t&&(t=!1),q()(e).then((function(e){return t?e:e.data})).catch((function(e){throw z.debug(e),e}))},e.prototype._parseUrl=function(e){var t=e.split("/");return{host:t[2],path:"/"+t.slice(3).join("/")}},e}(),Q=function(){return(Q=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},J=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(t){o(t)}}function a(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},Y=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},W=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},H=new l.k("RestAPI"),X=function(){function e(e){this._api=null,this.Credentials=g.cN,this._options=e,H.debug("API Options",this._options)}return e.prototype.getModuleName=function(){return"RestAPI"},e.prototype.configure=function(e){var t=e||{},n=t.API,r=void 0===n?{}:n,i=W(t,["API"]),o=Q(Q({},i),r);if(H.debug("configure Rest API",{opt:o}),o.aws_project_region){if(o.aws_cloud_logic_custom){var s=o.aws_cloud_logic_custom;o.endpoints="string"===typeof s?JSON.parse(s):s}o=Object.assign({},o,{region:o.aws_project_region,header:{}})}return Array.isArray(o.endpoints)?o.endpoints.forEach((function(e){"undefined"!==typeof e.custom_header&&"function"!==typeof e.custom_header&&(H.warn("Rest API "+e.name+", custom_header should be a function"),e.custom_header=void 0)})):this._options&&Array.isArray(this._options.endpoints)?o.endpoints=this._options.endpoints:o.endpoints=[],this._options=Object.assign({},this._options,o),this.createInstance(),this._options},e.prototype.createInstance=function(){return H.debug("create Rest API instance"),this._api=new K(this._options),this._api.Credentials=this.Credentials,!0},e.prototype.get=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;var s=this._api.get(r,o);return this._api.updateRequestToBeCancellable(s,i),s}catch(a){return Promise.reject(a.message)}},e.prototype.post=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;var s=this._api.post(r,o);return this._api.updateRequestToBeCancellable(s,i),s}catch(a){return Promise.reject(a.message)}},e.prototype.put=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;var s=this._api.put(r,o);return this._api.updateRequestToBeCancellable(s,i),s}catch(a){return Promise.reject(a.message)}},e.prototype.patch=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;var s=this._api.patch(r,o);return this._api.updateRequestToBeCancellable(s,i),s}catch(a){return Promise.reject(a.message)}},e.prototype.del=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;var s=this._api.del(r,o);return this._api.updateRequestToBeCancellable(s,i),s}catch(a){return Promise.reject(a.message)}},e.prototype.head=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;var s=this._api.head(r,o);return this._api.updateRequestToBeCancellable(s,i),s}catch(a){return Promise.reject(a.message)}},e.prototype.isCancel=function(e){return this._api.isCancel(e)},e.prototype.cancel=function(e,t){return this._api.cancel(e,t)},e.prototype.endpoint=function(e){return J(this,void 0,void 0,(function(){return Y(this,(function(t){return[2,this._api.endpoint(e)]}))}))},e.prototype.getEndpointInfo=function(e,t){var n=this._options.endpoints;if(!Array.isArray(n))throw new Error("API category not configured");var r=n.find((function(t){return t.name===e}));if(!r)throw new Error("API "+e+" does not exist");var i={endpoint:r.endpoint+t};return"string"===typeof r.region?i.region=r.region:"string"===typeof this._options.region&&(i.region=this._options.region),"string"===typeof r.service?i.service=r.service||"execute-api":i.service="execute-api","function"===typeof r.custom_header?i.custom_header=r.custom_header:i.custom_header=void 0,i},e}(),Z=new X(null);function $(e,t){for(var n,r=/\r\n|[\n\r]/g,i=1,o=t+1;(n=r.exec(e.body))&&n.index<t;)i+=1,o=t+1-(n.index+n[0].length);return{line:i,column:o}}function ee(e,t){var n=e.locationOffset.column-1,r=te(n)+e.body,i=t.line-1,o=e.locationOffset.line-1,s=t.line+o,a=1===t.line?n:0,c=t.column+a,u=r.split(/\r\n|[\n\r]/g);return"".concat(e.name," (").concat(s,":").concat(c,")\n")+function(e){var t=e.filter((function(e){e[0];return void 0!==e[1]})),n=0,r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done);r=!0){var c=s.value[0];n=Math.max(n,c.length)}}catch(u){i=!0,o=u}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return t.map((function(e){var t,r=e[0],i=e[1];return te(n-(t=r).length)+t+i})).join("\n")}([["".concat(s-1,": "),u[i-1]],["".concat(s,": "),u[i]],["",te(c-1)+"^"],["".concat(s+1,": "),u[i+1]]])}function te(e){return Array(e+1).join(" ")}function ne(e,t,n,r,i,o,s){var a=Array.isArray(t)?0!==t.length?t:void 0:t?[t]:void 0,c=n;if(!c&&a){var u=a[0];c=u&&u.loc&&u.loc.source}var l,f=r;!f&&a&&(f=a.reduce((function(e,t){return t.loc&&e.push(t.loc.start),e}),[])),f&&0===f.length&&(f=void 0),r&&n?l=r.map((function(e){return $(n,e)})):a&&(l=a.reduce((function(e,t){return t.loc&&e.push($(t.loc.source,t.loc.start)),e}),[]));var p=s||o&&o.extensions;Object.defineProperties(this,{message:{value:e,enumerable:!0,writable:!0},locations:{value:l||void 0,enumerable:Boolean(l)},path:{value:i||void 0,enumerable:Boolean(i)},nodes:{value:a||void 0},source:{value:c||void 0},positions:{value:f||void 0},originalError:{value:o},extensions:{value:p||void 0,enumerable:Boolean(p)}}),o&&o.stack?Object.defineProperty(this,"stack",{value:o.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,ne):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}i.dQ.register(Z),ne.prototype=Object.create(Error.prototype,{constructor:{value:ne},name:{value:"GraphQLError"},toString:{value:function(){return function(e){var t=[];if(e.nodes){var n=!0,r=!1,i=void 0;try{for(var o,s=e.nodes[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;a.loc&&t.push(ee(a.loc.source,$(a.loc.source,a.loc.start)))}}catch(y){r=!0,i=y}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}}else if(e.source&&e.locations){var c=e.source,u=!0,l=!1,f=void 0;try{for(var p,h=e.locations[Symbol.iterator]();!(u=(p=h.next()).done);u=!0){var d=p.value;t.push(ee(c,d))}}catch(y){l=!0,f=y}finally{try{u||null==h.return||h.return()}finally{if(l)throw f}}}return 0===t.length?e.message:[e.message].concat(t).join("\n\n")+"\n"}(this)}}});var re={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},ie={};function oe(e){return Boolean(e&&"string"===typeof e.kind)}function se(e,t,n){var r=e[t];if(r){if(!n&&"function"===typeof r)return r;var i=n?r.leave:r.enter;if("function"===typeof i)return i}else{var o=n?e.leave:e.enter;if(o){if("function"===typeof o)return o;var s=o[t];if("function"===typeof s)return s}}}function ae(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:re,r=void 0,i=Array.isArray(e),o=[e],s=-1,a=[],c=void 0,u=void 0,l=void 0,f=[],p=[],h=e;do{var d=++s===o.length,y=d&&0!==a.length;if(d){if(u=0===p.length?void 0:f[f.length-1],c=l,l=p.pop(),y){if(i)c=c.slice();else{var v={};for(var g in c)c.hasOwnProperty(g)&&(v[g]=c[g]);c=v}for(var _=0,b=0;b<a.length;b++){var m=a[b][0],E=a[b][1];i&&(m-=_),i&&null===E?(c.splice(m,1),_++):c[m]=E}}s=r.index,o=r.keys,a=r.edits,i=r.inArray,r=r.prev}else{if(u=l?i?s:o[s]:void 0,null===(c=l?l[u]:h)||void 0===c)continue;l&&f.push(u)}var I=void 0;if(!Array.isArray(c)){if(!oe(c))throw new Error("Invalid AST Node: "+JSON.stringify(c));var w=se(t,c.kind,d);if(w){if((I=w.call(t,c,u,l,f,p))===ie)break;if(!1===I){if(!d){f.pop();continue}}else if(void 0!==I&&(a.push([u,I]),!d)){if(!oe(I)){f.pop();continue}c=I}}}void 0===I&&y&&a.push([u,c]),d?f.pop():(r={inArray:i,index:s,keys:o,edits:a,prev:r},o=(i=Array.isArray(c))?c:n[c.kind]||[],s=-1,a=[],l&&p.push(l),l=c)}while(void 0!==r);return 0!==a.length&&(h=a[a.length-1][1]),h}(e,{leave:ce})}var ce={Name:function(e){return e.value},Variable:function(e){return"$"+e.name},Document:function(e){return le(e.definitions,"\n\n")+"\n"},OperationDefinition:function(e){var t=e.operation,n=e.name,r=pe("(",le(e.variableDefinitions,", "),")"),i=le(e.directives," "),o=e.selectionSet;return n||i||r||"query"!==t?le([t,le([n,r]),i,o]," "):o},VariableDefinition:function(e){var t=e.variable,n=e.type,r=e.defaultValue,i=e.directives;return t+": "+n+pe(" = ",r)+pe(" ",le(i," "))},SelectionSet:function(e){return fe(e.selections)},Field:function(e){var t=e.alias,n=e.name,r=e.arguments,i=e.directives,o=e.selectionSet;return le([pe("",t,": ")+n+pe("(",le(r,", "),")"),le(i," "),o]," ")},Argument:function(e){return e.name+": "+e.value},FragmentSpread:function(e){return"..."+e.name+pe(" ",le(e.directives," "))},InlineFragment:function(e){var t=e.typeCondition,n=e.directives,r=e.selectionSet;return le(["...",pe("on ",t),le(n," "),r]," ")},FragmentDefinition:function(e){var t=e.name,n=e.typeCondition,r=e.variableDefinitions,i=e.directives,o=e.selectionSet;return"fragment ".concat(t).concat(pe("(",le(r,", "),")")," ")+"on ".concat(n," ").concat(pe("",le(i," ")," "))+o},IntValue:function(e){return e.value},FloatValue:function(e){return e.value},StringValue:function(e,t){var n=e.value;return e.block?function(e,t){var n=e.replace(/"""/g,'\\"""');return" "!==e[0]&&"\t"!==e[0]||-1!==e.indexOf("\n")?'"""\n'.concat(t?n:he(n),'\n"""'):'"""'.concat(n.replace(/"$/,'"\n'),'"""')}(n,"description"===t):JSON.stringify(n)},BooleanValue:function(e){return e.value?"true":"false"},NullValue:function(){return"null"},EnumValue:function(e){return e.value},ListValue:function(e){return"["+le(e.values,", ")+"]"},ObjectValue:function(e){return"{"+le(e.fields,", ")+"}"},ObjectField:function(e){return e.name+": "+e.value},Directive:function(e){return"@"+e.name+pe("(",le(e.arguments,", "),")")},NamedType:function(e){return e.name},ListType:function(e){return"["+e.type+"]"},NonNullType:function(e){return e.type+"!"},SchemaDefinition:function(e){var t=e.directives,n=e.operationTypes;return le(["schema",le(t," "),fe(n)]," ")},OperationTypeDefinition:function(e){return e.operation+": "+e.type},ScalarTypeDefinition:ue((function(e){return le(["scalar",e.name,le(e.directives," ")]," ")})),ObjectTypeDefinition:ue((function(e){var t=e.name,n=e.interfaces,r=e.directives,i=e.fields;return le(["type",t,pe("implements ",le(n," & ")),le(r," "),fe(i)]," ")})),FieldDefinition:ue((function(e){var t=e.name,n=e.arguments,r=e.type,i=e.directives;return t+(n.every((function(e){return-1===e.indexOf("\n")}))?pe("(",le(n,", "),")"):pe("(\n",he(le(n,"\n")),"\n)"))+": "+r+pe(" ",le(i," "))})),InputValueDefinition:ue((function(e){var t=e.name,n=e.type,r=e.defaultValue,i=e.directives;return le([t+": "+n,pe("= ",r),le(i," ")]," ")})),InterfaceTypeDefinition:ue((function(e){var t=e.name,n=e.directives,r=e.fields;return le(["interface",t,le(n," "),fe(r)]," ")})),UnionTypeDefinition:ue((function(e){var t=e.name,n=e.directives,r=e.types;return le(["union",t,le(n," "),r&&0!==r.length?"= "+le(r," | "):""]," ")})),EnumTypeDefinition:ue((function(e){var t=e.name,n=e.directives,r=e.values;return le(["enum",t,le(n," "),fe(r)]," ")})),EnumValueDefinition:ue((function(e){return le([e.name,le(e.directives," ")]," ")})),InputObjectTypeDefinition:ue((function(e){var t=e.name,n=e.directives,r=e.fields;return le(["input",t,le(n," "),fe(r)]," ")})),DirectiveDefinition:ue((function(e){var t=e.name,n=e.arguments,r=e.locations;return"directive @"+t+(n.every((function(e){return-1===e.indexOf("\n")}))?pe("(",le(n,", "),")"):pe("(\n",he(le(n,"\n")),"\n)"))+" on "+le(r," | ")})),SchemaExtension:function(e){var t=e.directives,n=e.operationTypes;return le(["extend schema",le(t," "),fe(n)]," ")},ScalarTypeExtension:function(e){return le(["extend scalar",e.name,le(e.directives," ")]," ")},ObjectTypeExtension:function(e){var t=e.name,n=e.interfaces,r=e.directives,i=e.fields;return le(["extend type",t,pe("implements ",le(n," & ")),le(r," "),fe(i)]," ")},InterfaceTypeExtension:function(e){var t=e.name,n=e.directives,r=e.fields;return le(["extend interface",t,le(n," "),fe(r)]," ")},UnionTypeExtension:function(e){var t=e.name,n=e.directives,r=e.types;return le(["extend union",t,le(n," "),r&&0!==r.length?"= "+le(r," | "):""]," ")},EnumTypeExtension:function(e){var t=e.name,n=e.directives,r=e.values;return le(["extend enum",t,le(n," "),fe(r)]," ")},InputObjectTypeExtension:function(e){var t=e.name,n=e.directives,r=e.fields;return le(["extend input",t,le(n," "),fe(r)]," ")}};function ue(e){return function(t){return le([t.description,e(t)],"\n")}}function le(e,t){return e?e.filter((function(e){return e})).join(t||""):""}function fe(e){return e&&0!==e.length?"{\n"+he(le(e,"\n"))+"\n}":""}function pe(e,t,n){return t?e+t+(n||""):""}function he(e){return e&&"  "+e.replace(/\n/g,"\n  ")}function de(e){return(de="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ye(e){return e&&"object"===de(e)?"function"===typeof e.inspect?e.inspect():Array.isArray(e)?"["+e.map(ye).join(", ")+"]":"{"+Object.keys(e).map((function(t){return"".concat(t,": ").concat(ye(e[t]))})).join(", ")+"}":"string"===typeof e?'"'+e+'"':"function"===typeof e?"[function ".concat(e.name,"]"):String(e)}function ve(e,t){if(!e)throw new Error(t)}function ge(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _e,be=function(e,t,n){ge(this,"body",void 0),ge(this,"name",void 0),ge(this,"locationOffset",void 0),this.body=e,this.name=t||"GraphQL request",this.locationOffset=n||{line:1,column:1},this.locationOffset.line>0||ve(0,"line in locationOffset is 1-indexed and must be positive"),this.locationOffset.column>0||ve(0,"column in locationOffset is 1-indexed and must be positive")};function me(e,t,n){return new ne("Syntax Error: ".concat(n),void 0,e,[t])}function Ee(e){for(var t=e.split(/\r\n|[\n\r]/g),n=null,r=1;r<t.length;r++){var i=t[r],o=Ie(i);if(o<i.length&&(null===n||o<n)&&0===(n=o))break}if(n)for(var s=1;s<t.length;s++)t[s]=t[s].slice(n);for(;t.length>0&&we(t[0]);)t.shift();for(;t.length>0&&we(t[t.length-1]);)t.pop();return t.join("\n")}function Ie(e){for(var t=0;t<e.length&&(" "===e[t]||"\t"===e[t]);)t++;return t}function we(e){return Ie(e)===e.length}function Te(){return this.lastToken=this.token,this.token=this.lookahead()}function Oe(){var e=this.token;if(e.kind!==Se.EOF)do{e=e.next||(e.next=Pe(this,e))}while(e.kind===Se.COMMENT);return e}_e=be,"function"===typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(_e.prototype,Symbol.toStringTag,{get:function(){return this.constructor.name}});var Se=Object.freeze({SOF:"<SOF>",EOF:"<EOF>",BANG:"!",DOLLAR:"$",AMP:"&",PAREN_L:"(",PAREN_R:")",SPREAD:"...",COLON:":",EQUALS:"=",AT:"@",BRACKET_L:"[",BRACKET_R:"]",BRACE_L:"{",PIPE:"|",BRACE_R:"}",NAME:"Name",INT:"Int",FLOAT:"Float",STRING:"String",BLOCK_STRING:"BlockString",COMMENT:"Comment"});function Ne(e){var t=e.value;return t?"".concat(e.kind,' "').concat(t,'"'):e.kind}var Ae=String.prototype.charCodeAt,ke=String.prototype.slice;function Ce(e,t,n,r,i,o,s){this.kind=e,this.start=t,this.end=n,this.line=r,this.column=i,this.value=s,this.prev=o,this.next=null}function Re(e){return isNaN(e)?Se.EOF:e<127?JSON.stringify(String.fromCharCode(e)):'"\\u'.concat(("00"+e.toString(16).toUpperCase()).slice(-4),'"')}function Pe(e,t){var n=e.source,r=n.body,i=r.length,o=function(e,t,n){var r=e.length,i=t;for(;i<r;){var o=Ae.call(e,i);if(9===o||32===o||44===o||65279===o)++i;else if(10===o)++i,++n.line,n.lineStart=i;else{if(13!==o)break;10===Ae.call(e,i+1)?i+=2:++i,++n.line,n.lineStart=i}}return i}(r,t.end,e),s=e.line,a=1+o-e.lineStart;if(o>=i)return new Ce(Se.EOF,i,i,s,a,t);var c=Ae.call(r,o);switch(c){case 33:return new Ce(Se.BANG,o,o+1,s,a,t);case 35:return function(e,t,n,r,i){var o,s=e.body,a=t;do{o=Ae.call(s,++a)}while(null!==o&&(o>31||9===o));return new Ce(Se.COMMENT,t,a,n,r,i,ke.call(s,t+1,a))}(n,o,s,a,t);case 36:return new Ce(Se.DOLLAR,o,o+1,s,a,t);case 38:return new Ce(Se.AMP,o,o+1,s,a,t);case 40:return new Ce(Se.PAREN_L,o,o+1,s,a,t);case 41:return new Ce(Se.PAREN_R,o,o+1,s,a,t);case 46:if(46===Ae.call(r,o+1)&&46===Ae.call(r,o+2))return new Ce(Se.SPREAD,o,o+3,s,a,t);break;case 58:return new Ce(Se.COLON,o,o+1,s,a,t);case 61:return new Ce(Se.EQUALS,o,o+1,s,a,t);case 64:return new Ce(Se.AT,o,o+1,s,a,t);case 91:return new Ce(Se.BRACKET_L,o,o+1,s,a,t);case 93:return new Ce(Se.BRACKET_R,o,o+1,s,a,t);case 123:return new Ce(Se.BRACE_L,o,o+1,s,a,t);case 124:return new Ce(Se.PIPE,o,o+1,s,a,t);case 125:return new Ce(Se.BRACE_R,o,o+1,s,a,t);case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 95:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:return function(e,t,n,r,i){var o=e.body,s=o.length,a=t+1,c=0;for(;a!==s&&null!==(c=Ae.call(o,a))&&(95===c||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122);)++a;return new Ce(Se.NAME,t,a,n,r,i,ke.call(o,t,a))}(n,o,s,a,t);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return function(e,t,n,r,i,o){var s=e.body,a=n,c=t,u=!1;45===a&&(a=Ae.call(s,++c));if(48===a){if((a=Ae.call(s,++c))>=48&&a<=57)throw me(e,c,"Invalid number, unexpected digit after 0: ".concat(Re(a),"."))}else c=Me(e,c,a),a=Ae.call(s,c);46===a&&(u=!0,a=Ae.call(s,++c),c=Me(e,c,a),a=Ae.call(s,c));69!==a&&101!==a||(u=!0,43!==(a=Ae.call(s,++c))&&45!==a||(a=Ae.call(s,++c)),c=Me(e,c,a));return new Ce(u?Se.FLOAT:Se.INT,t,c,r,i,o,ke.call(s,t,c))}(n,o,c,s,a,t);case 34:return 34===Ae.call(r,o+1)&&34===Ae.call(r,o+2)?function(e,t,n,r,i){var o=e.body,s=t+3,a=s,c=0,u="";for(;s<o.length&&null!==(c=Ae.call(o,s));){if(34===c&&34===Ae.call(o,s+1)&&34===Ae.call(o,s+2))return u+=ke.call(o,a,s),new Ce(Se.BLOCK_STRING,t,s+3,n,r,i,Ee(u));if(c<32&&9!==c&&10!==c&&13!==c)throw me(e,s,"Invalid character within String: ".concat(Re(c),"."));92===c&&34===Ae.call(o,s+1)&&34===Ae.call(o,s+2)&&34===Ae.call(o,s+3)?(u+=ke.call(o,a,s)+'"""',a=s+=4):++s}throw me(e,s,"Unterminated string.")}(n,o,s,a,t):function(e,t,n,r,i){var o=e.body,s=t+1,a=s,c=0,u="";for(;s<o.length&&null!==(c=Ae.call(o,s))&&10!==c&&13!==c;){if(34===c)return u+=ke.call(o,a,s),new Ce(Se.STRING,t,s+1,n,r,i,u);if(c<32&&9!==c)throw me(e,s,"Invalid character within String: ".concat(Re(c),"."));if(++s,92===c){switch(u+=ke.call(o,a,s-1),c=Ae.call(o,s)){case 34:u+='"';break;case 47:u+="/";break;case 92:u+="\\";break;case 98:u+="\b";break;case 102:u+="\f";break;case 110:u+="\n";break;case 114:u+="\r";break;case 116:u+="\t";break;case 117:var l=Le(Ae.call(o,s+1),Ae.call(o,s+2),Ae.call(o,s+3),Ae.call(o,s+4));if(l<0)throw me(e,s,"Invalid character escape sequence: "+"\\u".concat(o.slice(s+1,s+5),"."));u+=String.fromCharCode(l),s+=4;break;default:throw me(e,s,"Invalid character escape sequence: \\".concat(String.fromCharCode(c),"."))}a=++s}}throw me(e,s,"Unterminated string.")}(n,o,s,a,t)}throw me(n,o,function(e){if(e<32&&9!==e&&10!==e&&13!==e)return"Cannot contain the invalid character ".concat(Re(e),".");if(39===e)return"Unexpected single quote character ('), did you mean to use a double quote (\")?";return"Cannot parse the unexpected character ".concat(Re(e),".")}(c))}function Me(e,t,n){var r=e.body,i=t,o=n;if(o>=48&&o<=57){do{o=Ae.call(r,++i)}while(o>=48&&o<=57);return i}throw me(e,i,"Invalid number, expected digit but got: ".concat(Re(o),"."))}function Le(e,t,n,r){return De(e)<<12|De(t)<<8|De(n)<<4|De(r)}function De(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:-1}Ce.prototype.toJSON=Ce.prototype.inspect=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}};var xe=Object.freeze({NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType",SCHEMA_DEFINITION:"SchemaDefinition",OPERATION_TYPE_DEFINITION:"OperationTypeDefinition",SCALAR_TYPE_DEFINITION:"ScalarTypeDefinition",OBJECT_TYPE_DEFINITION:"ObjectTypeDefinition",FIELD_DEFINITION:"FieldDefinition",INPUT_VALUE_DEFINITION:"InputValueDefinition",INTERFACE_TYPE_DEFINITION:"InterfaceTypeDefinition",UNION_TYPE_DEFINITION:"UnionTypeDefinition",ENUM_TYPE_DEFINITION:"EnumTypeDefinition",ENUM_VALUE_DEFINITION:"EnumValueDefinition",INPUT_OBJECT_TYPE_DEFINITION:"InputObjectTypeDefinition",DIRECTIVE_DEFINITION:"DirectiveDefinition",SCHEMA_EXTENSION:"SchemaExtension",SCALAR_TYPE_EXTENSION:"ScalarTypeExtension",OBJECT_TYPE_EXTENSION:"ObjectTypeExtension",INTERFACE_TYPE_EXTENSION:"InterfaceTypeExtension",UNION_TYPE_EXTENSION:"UnionTypeExtension",ENUM_TYPE_EXTENSION:"EnumTypeExtension",INPUT_OBJECT_TYPE_EXTENSION:"InputObjectTypeExtension"}),Ue=Object.freeze({QUERY:"QUERY",MUTATION:"MUTATION",SUBSCRIPTION:"SUBSCRIPTION",FIELD:"FIELD",FRAGMENT_DEFINITION:"FRAGMENT_DEFINITION",FRAGMENT_SPREAD:"FRAGMENT_SPREAD",INLINE_FRAGMENT:"INLINE_FRAGMENT",VARIABLE_DEFINITION:"VARIABLE_DEFINITION",SCHEMA:"SCHEMA",SCALAR:"SCALAR",OBJECT:"OBJECT",FIELD_DEFINITION:"FIELD_DEFINITION",ARGUMENT_DEFINITION:"ARGUMENT_DEFINITION",INTERFACE:"INTERFACE",UNION:"UNION",ENUM:"ENUM",ENUM_VALUE:"ENUM_VALUE",INPUT_OBJECT:"INPUT_OBJECT",INPUT_FIELD_DEFINITION:"INPUT_FIELD_DEFINITION"});function Be(e,t){var n="string"===typeof e?new be(e):e;if(!(n instanceof be))throw new TypeError("Must provide Source. Received: ".concat(ye(n)));return function(e){var t=e.token;return{kind:xe.DOCUMENT,definitions:Ct(e,Se.SOF,je,Se.EOF),loc:It(e,t)}}(function(e,t){var n=new Ce(Se.SOF,0,0,0,0,null);return{source:e,options:t,lastToken:n,token:n,line:1,lineStart:0,advance:Te,lookahead:Oe}}(n,t||{}))}function qe(e){var t=St(e,Se.NAME);return{kind:xe.NAME,value:t.value,loc:It(e,t)}}function je(e){if(Tt(e,Se.NAME))switch(e.token.value){case"query":case"mutation":case"subscription":case"fragment":return Fe(e);case"schema":case"scalar":case"type":case"interface":case"union":case"enum":case"input":case"directive":return ct(e);case"extend":return function(e){var t=e.lookahead();if(t.kind===Se.NAME)switch(t.value){case"schema":return function(e){var t=e.token;Nt(e,"extend"),Nt(e,"schema");var n=it(e,!0),r=Tt(e,Se.BRACE_L)?Ct(e,Se.BRACE_L,ft,Se.BRACE_R):[];if(0===n.length&&0===r.length)throw At(e);return{kind:xe.SCHEMA_EXTENSION,directives:n,operationTypes:r,loc:It(e,t)}}(e);case"scalar":return function(e){var t=e.token;Nt(e,"extend"),Nt(e,"scalar");var n=qe(e),r=it(e,!0);if(0===r.length)throw At(e);return{kind:xe.SCALAR_TYPE_EXTENSION,name:n,directives:r,loc:It(e,t)}}(e);case"type":return function(e){var t=e.token;Nt(e,"extend"),Nt(e,"type");var n=qe(e),r=pt(e),i=it(e,!0),o=ht(e);if(0===r.length&&0===i.length&&0===o.length)throw At(e);return{kind:xe.OBJECT_TYPE_EXTENSION,name:n,interfaces:r,directives:i,fields:o,loc:It(e,t)}}(e);case"interface":return function(e){var t=e.token;Nt(e,"extend"),Nt(e,"interface");var n=qe(e),r=it(e,!0),i=ht(e);if(0===r.length&&0===i.length)throw At(e);return{kind:xe.INTERFACE_TYPE_EXTENSION,name:n,directives:r,fields:i,loc:It(e,t)}}(e);case"union":return function(e){var t=e.token;Nt(e,"extend"),Nt(e,"union");var n=qe(e),r=it(e,!0),i=gt(e);if(0===r.length&&0===i.length)throw At(e);return{kind:xe.UNION_TYPE_EXTENSION,name:n,directives:r,types:i,loc:It(e,t)}}(e);case"enum":return function(e){var t=e.token;Nt(e,"extend"),Nt(e,"enum");var n=qe(e),r=it(e,!0),i=_t(e);if(0===r.length&&0===i.length)throw At(e);return{kind:xe.ENUM_TYPE_EXTENSION,name:n,directives:r,values:i,loc:It(e,t)}}(e);case"input":return function(e){var t=e.token;Nt(e,"extend"),Nt(e,"input");var n=qe(e),r=it(e,!0),i=mt(e);if(0===r.length&&0===i.length)throw At(e);return{kind:xe.INPUT_OBJECT_TYPE_EXTENSION,name:n,directives:r,fields:i,loc:It(e,t)}}(e)}throw At(e,t)}(e)}else{if(Tt(e,Se.BRACE_L))return Fe(e);if(ut(e))return ct(e)}throw At(e)}function Fe(e){if(Tt(e,Se.NAME))switch(e.token.value){case"query":case"mutation":case"subscription":return Ve(e);case"fragment":return function(e){var t=e.token;if(Nt(e,"fragment"),e.options.experimentalFragmentVariables)return{kind:xe.FRAGMENT_DEFINITION,name:Ze(e),variableDefinitions:ze(e),typeCondition:(Nt(e,"on"),at(e)),directives:it(e,!1),selectionSet:Je(e),loc:It(e,t)};return{kind:xe.FRAGMENT_DEFINITION,name:Ze(e),typeCondition:(Nt(e,"on"),at(e)),directives:it(e,!1),selectionSet:Je(e),loc:It(e,t)}}(e)}else if(Tt(e,Se.BRACE_L))return Ve(e);throw At(e)}function Ve(e){var t=e.token;if(Tt(e,Se.BRACE_L))return{kind:xe.OPERATION_DEFINITION,operation:"query",name:void 0,variableDefinitions:[],directives:[],selectionSet:Je(e),loc:It(e,t)};var n,r=Ge(e);return Tt(e,Se.NAME)&&(n=qe(e)),{kind:xe.OPERATION_DEFINITION,operation:r,name:n,variableDefinitions:ze(e),directives:it(e,!1),selectionSet:Je(e),loc:It(e,t)}}function Ge(e){var t=St(e,Se.NAME);switch(t.value){case"query":return"query";case"mutation":return"mutation";case"subscription":return"subscription"}throw At(e,t)}function ze(e){return Tt(e,Se.PAREN_L)?Ct(e,Se.PAREN_L,Ke,Se.PAREN_R):[]}function Ke(e){var t=e.token;return e.options.experimentalVariableDefinitionDirectives?{kind:xe.VARIABLE_DEFINITION,variable:Qe(e),type:(St(e,Se.COLON),st(e)),defaultValue:Ot(e,Se.EQUALS)?$e(e,!0):void 0,directives:it(e,!0),loc:It(e,t)}:{kind:xe.VARIABLE_DEFINITION,variable:Qe(e),type:(St(e,Se.COLON),st(e)),defaultValue:Ot(e,Se.EQUALS)?$e(e,!0):void 0,loc:It(e,t)}}function Qe(e){var t=e.token;return St(e,Se.DOLLAR),{kind:xe.VARIABLE,name:qe(e),loc:It(e,t)}}function Je(e){var t=e.token;return{kind:xe.SELECTION_SET,selections:Ct(e,Se.BRACE_L,Ye,Se.BRACE_R),loc:It(e,t)}}function Ye(e){return Tt(e,Se.SPREAD)?function(e){var t,n=e.token;if(St(e,Se.SPREAD),Tt(e,Se.NAME)&&"on"!==e.token.value)return{kind:xe.FRAGMENT_SPREAD,name:Ze(e),directives:it(e,!1),loc:It(e,n)};"on"===e.token.value&&(e.advance(),t=at(e));return{kind:xe.INLINE_FRAGMENT,typeCondition:t,directives:it(e,!1),selectionSet:Je(e),loc:It(e,n)}}(e):function(e){var t,n,r=e.token,i=qe(e);Ot(e,Se.COLON)?(t=i,n=qe(e)):n=i;return{kind:xe.FIELD,alias:t,name:n,arguments:We(e,!1),directives:it(e,!1),selectionSet:Tt(e,Se.BRACE_L)?Je(e):void 0,loc:It(e,r)}}(e)}function We(e,t){var n=t?Xe:He;return Tt(e,Se.PAREN_L)?Ct(e,Se.PAREN_L,n,Se.PAREN_R):[]}function He(e){var t=e.token;return{kind:xe.ARGUMENT,name:qe(e),value:(St(e,Se.COLON),$e(e,!1)),loc:It(e,t)}}function Xe(e){var t=e.token;return{kind:xe.ARGUMENT,name:qe(e),value:(St(e,Se.COLON),tt(e)),loc:It(e,t)}}function Ze(e){if("on"===e.token.value)throw At(e);return qe(e)}function $e(e,t){var n=e.token;switch(n.kind){case Se.BRACKET_L:return function(e,t){var n=e.token,r=t?tt:nt;return{kind:xe.LIST,values:kt(e,Se.BRACKET_L,r,Se.BRACKET_R),loc:It(e,n)}}(e,t);case Se.BRACE_L:return function(e,t){var n=e.token;St(e,Se.BRACE_L);var r=[];for(;!Ot(e,Se.BRACE_R);)r.push(rt(e,t));return{kind:xe.OBJECT,fields:r,loc:It(e,n)}}(e,t);case Se.INT:return e.advance(),{kind:xe.INT,value:n.value,loc:It(e,n)};case Se.FLOAT:return e.advance(),{kind:xe.FLOAT,value:n.value,loc:It(e,n)};case Se.STRING:case Se.BLOCK_STRING:return et(e);case Se.NAME:return"true"===n.value||"false"===n.value?(e.advance(),{kind:xe.BOOLEAN,value:"true"===n.value,loc:It(e,n)}):"null"===n.value?(e.advance(),{kind:xe.NULL,loc:It(e,n)}):(e.advance(),{kind:xe.ENUM,value:n.value,loc:It(e,n)});case Se.DOLLAR:if(!t)return Qe(e)}throw At(e)}function et(e){var t=e.token;return e.advance(),{kind:xe.STRING,value:t.value,block:t.kind===Se.BLOCK_STRING,loc:It(e,t)}}function tt(e){return $e(e,!0)}function nt(e){return $e(e,!1)}function rt(e,t){var n=e.token;return{kind:xe.OBJECT_FIELD,name:qe(e),value:(St(e,Se.COLON),$e(e,t)),loc:It(e,n)}}function it(e,t){for(var n=[];Tt(e,Se.AT);)n.push(ot(e,t));return n}function ot(e,t){var n=e.token;return St(e,Se.AT),{kind:xe.DIRECTIVE,name:qe(e),arguments:We(e,t),loc:It(e,n)}}function st(e){var t,n=e.token;return Ot(e,Se.BRACKET_L)?(t=st(e),St(e,Se.BRACKET_R),t={kind:xe.LIST_TYPE,type:t,loc:It(e,n)}):t=at(e),Ot(e,Se.BANG)?{kind:xe.NON_NULL_TYPE,type:t,loc:It(e,n)}:t}function at(e){var t=e.token;return{kind:xe.NAMED_TYPE,name:qe(e),loc:It(e,t)}}function ct(e){var t=ut(e)?e.lookahead():e.token;if(t.kind===Se.NAME)switch(t.value){case"schema":return function(e){var t=e.token;Nt(e,"schema");var n=it(e,!0),r=Ct(e,Se.BRACE_L,ft,Se.BRACE_R);return{kind:xe.SCHEMA_DEFINITION,directives:n,operationTypes:r,loc:It(e,t)}}(e);case"scalar":return function(e){var t=e.token,n=lt(e);Nt(e,"scalar");var r=qe(e),i=it(e,!0);return{kind:xe.SCALAR_TYPE_DEFINITION,description:n,name:r,directives:i,loc:It(e,t)}}(e);case"type":return function(e){var t=e.token,n=lt(e);Nt(e,"type");var r=qe(e),i=pt(e),o=it(e,!0),s=ht(e);return{kind:xe.OBJECT_TYPE_DEFINITION,description:n,name:r,interfaces:i,directives:o,fields:s,loc:It(e,t)}}(e);case"interface":return function(e){var t=e.token,n=lt(e);Nt(e,"interface");var r=qe(e),i=it(e,!0),o=ht(e);return{kind:xe.INTERFACE_TYPE_DEFINITION,description:n,name:r,directives:i,fields:o,loc:It(e,t)}}(e);case"union":return function(e){var t=e.token,n=lt(e);Nt(e,"union");var r=qe(e),i=it(e,!0),o=gt(e);return{kind:xe.UNION_TYPE_DEFINITION,description:n,name:r,directives:i,types:o,loc:It(e,t)}}(e);case"enum":return function(e){var t=e.token,n=lt(e);Nt(e,"enum");var r=qe(e),i=it(e,!0),o=_t(e);return{kind:xe.ENUM_TYPE_DEFINITION,description:n,name:r,directives:i,values:o,loc:It(e,t)}}(e);case"input":return function(e){var t=e.token,n=lt(e);Nt(e,"input");var r=qe(e),i=it(e,!0),o=mt(e);return{kind:xe.INPUT_OBJECT_TYPE_DEFINITION,description:n,name:r,directives:i,fields:o,loc:It(e,t)}}(e);case"directive":return function(e){var t=e.token,n=lt(e);Nt(e,"directive"),St(e,Se.AT);var r=qe(e),i=yt(e);Nt(e,"on");var o=function(e){Ot(e,Se.PIPE);var t=[];do{t.push(Et(e))}while(Ot(e,Se.PIPE));return t}(e);return{kind:xe.DIRECTIVE_DEFINITION,description:n,name:r,arguments:i,locations:o,loc:It(e,t)}}(e)}throw At(e,t)}function ut(e){return Tt(e,Se.STRING)||Tt(e,Se.BLOCK_STRING)}function lt(e){if(ut(e))return et(e)}function ft(e){var t=e.token,n=Ge(e);St(e,Se.COLON);var r=at(e);return{kind:xe.OPERATION_TYPE_DEFINITION,operation:n,type:r,loc:It(e,t)}}function pt(e){var t=[];if("implements"===e.token.value){e.advance(),Ot(e,Se.AMP);do{t.push(at(e))}while(Ot(e,Se.AMP)||e.options.allowLegacySDLImplementsInterfaces&&Tt(e,Se.NAME))}return t}function ht(e){return e.options.allowLegacySDLEmptyFields&&Tt(e,Se.BRACE_L)&&e.lookahead().kind===Se.BRACE_R?(e.advance(),e.advance(),[]):Tt(e,Se.BRACE_L)?Ct(e,Se.BRACE_L,dt,Se.BRACE_R):[]}function dt(e){var t=e.token,n=lt(e),r=qe(e),i=yt(e);St(e,Se.COLON);var o=st(e),s=it(e,!0);return{kind:xe.FIELD_DEFINITION,description:n,name:r,arguments:i,type:o,directives:s,loc:It(e,t)}}function yt(e){return Tt(e,Se.PAREN_L)?Ct(e,Se.PAREN_L,vt,Se.PAREN_R):[]}function vt(e){var t=e.token,n=lt(e),r=qe(e);St(e,Se.COLON);var i,o=st(e);Ot(e,Se.EQUALS)&&(i=tt(e));var s=it(e,!0);return{kind:xe.INPUT_VALUE_DEFINITION,description:n,name:r,type:o,defaultValue:i,directives:s,loc:It(e,t)}}function gt(e){var t=[];if(Ot(e,Se.EQUALS)){Ot(e,Se.PIPE);do{t.push(at(e))}while(Ot(e,Se.PIPE))}return t}function _t(e){return Tt(e,Se.BRACE_L)?Ct(e,Se.BRACE_L,bt,Se.BRACE_R):[]}function bt(e){var t=e.token,n=lt(e),r=qe(e),i=it(e,!0);return{kind:xe.ENUM_VALUE_DEFINITION,description:n,name:r,directives:i,loc:It(e,t)}}function mt(e){return Tt(e,Se.BRACE_L)?Ct(e,Se.BRACE_L,vt,Se.BRACE_R):[]}function Et(e){var t=e.token,n=qe(e);if(Ue.hasOwnProperty(n.value))return n;throw At(e,t)}function It(e,t){if(!e.options.noLocation)return new wt(t,e.lastToken,e.source)}function wt(e,t,n){this.start=e.start,this.end=t.end,this.startToken=e,this.endToken=t,this.source=n}function Tt(e,t){return e.token.kind===t}function Ot(e,t){var n=e.token.kind===t;return n&&e.advance(),n}function St(e,t){var n=e.token;if(n.kind===t)return e.advance(),n;throw me(e.source,n.start,"Expected ".concat(t,", found ").concat(Ne(n)))}function Nt(e,t){var n=e.token;if(n.kind===Se.NAME&&n.value===t)return e.advance(),n;throw me(e.source,n.start,'Expected "'.concat(t,'", found ').concat(Ne(n)))}function At(e,t){var n=t||e.token;return me(e.source,n.start,"Unexpected ".concat(Ne(n)))}function kt(e,t,n,r){St(e,t);for(var i=[];!Ot(e,r);)i.push(n(e));return i}function Ct(e,t,n,r){St(e,t);for(var i=[n(e)];!Ot(e,r);)i.push(n(e));return i}wt.prototype.toJSON=wt.prototype.inspect=function(){return{start:this.start,end:this.end}};var Rt=n(2679),Pt="undefined"!==typeof Symbol&&"function"===typeof Symbol.for,Mt=Pt?Symbol.for("INTERNAL_AWS_APPSYNC_PUBSUB_PROVIDER"):"@@INTERNAL_AWS_APPSYNC_PUBSUB_PROVIDER",Lt=Pt?Symbol.for("INTERNAL_AWS_APPSYNC_REALTIME_PUBSUB_PROVIDER"):"@@INTERNAL_AWS_APPSYNC_REALTIME_PUBSUB_PROVIDER",Dt=n(9329),xt=n.n(Dt)(),Ut=n(9222),Bt=n(8295),qt=n(5408),jt=function(){return(jt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Ft=new l.k("AbstractPubSubProvider"),Vt=function(){function e(e){void 0===e&&(e={}),this._config=e}return e.prototype.configure=function(e){return void 0===e&&(e={}),this._config=jt(jt({},e),this._config),Ft.debug("configure "+this.getProviderName(),this._config),this.options},e.prototype.getCategory=function(){return"PubSub"},Object.defineProperty(e.prototype,"options",{get:function(){return jt({},this._config)},enumerable:!0,configurable:!0}),e}(),Gt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),zt=function(){return(zt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Kt=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(t){o(t)}}function a(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},Qt=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},Jt=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},Yt=new l.k("MqttOverWSProvider");var Wt,Ht,Xt,Zt=function(){function e(){this.promises=new Map}return e.prototype.get=function(e,t){return Kt(this,void 0,void 0,(function(){var n;return Qt(this,(function(r){return(n=this.promises.get(e))||(n=t(e),this.promises.set(e,n)),[2,n]}))}))},Object.defineProperty(e.prototype,"allClients",{get:function(){return Array.from(this.promises.keys())},enumerable:!0,configurable:!0}),e.prototype.remove=function(e){this.promises.delete(e)},e}(),$t="undefined"!==typeof Symbol?Symbol("topic"):"@@topic",en=function(e){function t(t){void 0===t&&(t={});var n=e.call(this,zt(zt({},t),{clientId:t.clientId||(0,qt.v4)()}))||this;return n._clientsQueue=new Zt,n._topicObservers=new Map,n._clientIdObservers=new Map,n}return Gt(t,e),Object.defineProperty(t.prototype,"clientId",{get:function(){return this.options.clientId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endpoint",{get:function(){return this.options.aws_pubsub_endpoint},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"clientsQueue",{get:function(){return this._clientsQueue},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSSLEnabled",{get:function(){return!this.options.aws_appsync_dangerously_connect_to_http_endpoint_for_testing},enumerable:!0,configurable:!0}),t.prototype.getTopicForValue=function(e){return"object"===typeof e&&e[$t]},t.prototype.getProviderName=function(){return"MqttOverWSProvider"},t.prototype.onDisconnect=function(e){var t=this,n=e.clientId,r=e.errorCode,i=Jt(e,["clientId","errorCode"]);if(0!==r){Yt.warn(n,JSON.stringify(zt({errorCode:r},i),null,2));var o=[],s=this._clientIdObservers.get(n);if(!s)return;s.forEach((function(e){e.error("Disconnected, error code: "+r),t._topicObservers.forEach((function(t,n){t.delete(e),0===t.size&&o.push(n)}))})),this._clientIdObservers.delete(n),o.forEach((function(e){t._topicObservers.delete(e)}))}},t.prototype.newClient=function(e){var t=e.url,n=e.clientId;return Kt(this,void 0,void 0,(function(){var e,r=this;return Qt(this,(function(i){switch(i.label){case 0:return Yt.debug("Creating new MQTT client",n),(e=new Bt.Client(t,n)).onMessageArrived=function(e){var t=e.destinationName,n=e.payloadString;r._onMessage(t,n)},e.onConnectionLost=function(e){var t=e.errorCode,i=Jt(e,["errorCode"]);r.onDisconnect(zt({clientId:n,errorCode:t},i))},[4,new Promise((function(t,n){e.connect({useSSL:r.isSSLEnabled,mqttVersion:3,onSuccess:function(){return t(e)},onFailure:n})}))];case 1:return i.sent(),[2,e]}}))}))},t.prototype.connect=function(e,t){return void 0===t&&(t={}),Kt(this,void 0,void 0,(function(){var n=this;return Qt(this,(function(r){switch(r.label){case 0:return[4,this.clientsQueue.get(e,(function(e){return n.newClient(zt(zt({},t),{clientId:e}))}))];case 1:return[2,r.sent()]}}))}))},t.prototype.disconnect=function(e){return Kt(this,void 0,void 0,(function(){var t;return Qt(this,(function(n){switch(n.label){case 0:return[4,this.clientsQueue.get(e,(function(){return null}))];case 1:return(t=n.sent())&&t.isConnected()&&t.disconnect(),this.clientsQueue.remove(e),[2]}}))}))},t.prototype.publish=function(e,t){return Kt(this,void 0,void 0,(function(){var n,r,i,o;return Qt(this,(function(s){switch(s.label){case 0:return n=[].concat(e),r=JSON.stringify(t),[4,this.endpoint];case 1:return i=s.sent(),[4,this.connect(this.clientId,{url:i})];case 2:return o=s.sent(),Yt.debug("Publishing to topic(s)",n.join(","),r),n.forEach((function(e){return o.send(e,r)})),[2]}}))}))},t.prototype._onMessage=function(e,t){try{var n=[];this._topicObservers.forEach((function(t,r){(function(e,t){for(var n=e.split("/"),r=n.length,i=t.split("/"),o=0;o<r;++o){var s=n[o],a=i[o];if("#"===s)return i.length>=r;if("+"!==s&&s!==a)return!1}return r===i.length})(r,e)&&n.push(t)}));var r=JSON.parse(t);"object"===typeof r&&(r[$t]=e),n.forEach((function(e){e.forEach((function(e){return e.next(r)}))}))}catch(i){Yt.warn("Error handling message",i,t)}},t.prototype.subscribe=function(e,t){var n=this;void 0===t&&(t={});var r=[].concat(e);return Yt.debug("Subscribing to topic(s)",r.join(",")),new xt((function(e){var i;r.forEach((function(t){var r=n._topicObservers.get(t);r||(r=new Set,n._topicObservers.set(t,r)),r.add(e)}));var o=t.clientId,s=void 0===o?n.clientId:o,a=n._clientIdObservers.get(s);return a||(a=new Set),a.add(e),n._clientIdObservers.set(s,a),Kt(n,void 0,void 0,(function(){var n,o,a,c;return Qt(this,(function(u){switch(u.label){case 0:return void 0!==(n=t.url)?[3,2]:[4,this.endpoint];case 1:return a=u.sent(),[3,3];case 2:a=n,u.label=3;case 3:o=a,u.label=4;case 4:return u.trys.push([4,6,,7]),[4,this.connect(s,{url:o})];case 5:return i=u.sent(),r.forEach((function(e){i.subscribe(e)})),[3,7];case 6:return c=u.sent(),e.error(c),[3,7];case 7:return[2]}}))})),function(){return Yt.debug("Unsubscribing from topic(s)",r.join(",")),i&&(n._clientIdObservers.get(s).delete(e),0===n._clientIdObservers.get(s).size&&(n.disconnect(s),n._clientIdObservers.delete(s)),r.forEach((function(t){var r=n._topicObservers.get(t)||new Set;r.delete(e),0===r.size&&(n._topicObservers.delete(t),i.isConnected()&&i.unsubscribe(t))}))),null}}))},t}(Vt),tn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),nn=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(t){o(t)}}function a(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},rn=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},on=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},sn=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},an=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(sn(arguments[t]));return e},cn=new l.k("AWSAppSyncProvider"),un=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._topicClient=new Map,t._topicAlias=new Map,t}return tn(t,e),Object.defineProperty(t.prototype,"endpoint",{get:function(){throw new Error("Not supported")},enumerable:!0,configurable:!0}),t.prototype.getProviderName=function(){return"AWSAppSyncProvider"},t.prototype.publish=function(e,t,n){return nn(this,void 0,void 0,(function(){return rn(this,(function(e){throw new Error("Operation not supported")}))}))},t.prototype._cleanUp=function(e){var t=this;Array.from(this._topicClient.entries()).filter((function(t){return sn(t,2)[1].clientId===e})).map((function(e){return sn(e,1)[0]})).forEach((function(e){return t._cleanUpForTopic(e)}))},t.prototype._cleanUpForTopic=function(e){this._topicClient.delete(e),this._topicAlias.delete(e)},t.prototype.onDisconnect=function(e){var t=this,n=e.clientId,r=e.errorCode,i=on(e,["clientId","errorCode"]);0!==r&&(Array.from(this._topicClient.entries()).filter((function(e){return sn(e,2)[1].clientId===n})).map((function(e){return sn(e,1)[0]})).forEach((function(e){t._topicObservers.has(e)&&(t._topicObservers.get(e).forEach((function(e){e.closed||e.error(i)})),t._topicObservers.delete(e))})),this._cleanUp(n))},t.prototype.disconnect=function(t){return nn(this,void 0,void 0,(function(){return rn(this,(function(n){switch(n.label){case 0:return[4,this.clientsQueue.get(t,(function(){return null}))];case 1:return n.sent(),[4,e.prototype.disconnect.call(this,t)];case 2:return n.sent(),this._cleanUp(t),[2]}}))}))},t.prototype.subscribe=function(e,t){var n=this;void 0===t&&(t={});var r=new xt((function(r){var i=[].concat(e);return cn.debug("Subscribing to topic(s)",i.join(",")),nn(n,void 0,void 0,(function(){var e,n,o,s,a,c=this;return rn(this,(function(u){switch(u.label){case 0:return i.forEach((function(e){c._topicObservers.has(e)||c._topicObservers.set(e,new Set),c._topicObservers.get(e).add(r)})),e=t.mqttConnections,n=void 0===e?[]:e,o=t.newSubscriptions,s=Object.entries(o).map((function(e){var t=sn(e,2),n=t[0];return[t[1].topic,n]})),this._topicAlias=new Map(an(Array.from(this._topicAlias.entries()),s)),a=Object.entries(i.reduce((function(e,t){var r=n.find((function(e){return e.topics.indexOf(t)>-1}));if(r){var i=r.client,o=r.url;e[i]||(e[i]={url:o,topics:new Set}),e[i].topics.add(t)}return e}),{})),[4,Promise.all(a.map((function(e){var t=sn(e,2),n=t[0],i=t[1],o=i.url,s=i.topics;return nn(c,void 0,void 0,(function(){var e,t,i=this;return rn(this,(function(a){switch(a.label){case 0:e=null,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.connect(n,{clientId:n,url:o})];case 2:return e=a.sent(),[3,4];case 3:return t=a.sent(),r.error({message:"Failed to connect",error:t}),r.complete(),[2,void 0];case 4:return s.forEach((function(t){e.isConnected()&&(e.subscribe(t),i._topicClient.set(t,e))})),[2,e]}}))}))})))];case 1:return u.sent(),[2]}}))})),function(){cn.debug("Unsubscribing from topic(s)",i.join(",")),i.forEach((function(e){var t=n._topicClient.get(e);t&&t.isConnected()&&(t.unsubscribe(e),n._topicClient.delete(e),Array.from(n._topicClient.values()).some((function(e){return e===t}))||n.disconnect(t.clientId)),n._topicObservers.delete(e)}))}}));return xt.from(r).map((function(e){var t=n.getTopicForValue(e),r=n._topicAlias.get(t);return e.data=Object.entries(e.data).reduce((function(e,t){var n=sn(t,2),i=n[0],o=n[1];return e[r||i]=o,e}),{}),e}))},t}(en),ln=n(8764),fn=n(490),pn=n(7262),hn=n(3550),dn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),yn=function(){return(yn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},vn=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(t){o(t)}}function a(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},gn=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},_n=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},bn=new l.k("AWSAppSyncRealTimeProvider"),mn="undefined"!==typeof Symbol&&"function"===typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",En=[400,401,403];!function(e){e.GQL_CONNECTION_INIT="connection_init",e.GQL_CONNECTION_ERROR="connection_error",e.GQL_CONNECTION_ACK="connection_ack",e.GQL_START="start",e.GQL_START_ACK="start_ack",e.GQL_DATA="data",e.GQL_CONNECTION_KEEP_ALIVE="ka",e.GQL_STOP="stop",e.GQL_COMPLETE="complete",e.GQL_ERROR="error"}(Wt||(Wt={})),function(e){e[e.PENDING=0]="PENDING",e[e.CONNECTED=1]="CONNECTED",e[e.FAILED=2]="FAILED"}(Ht||(Ht={})),function(e){e[e.CLOSED=0]="CLOSED",e[e.READY=1]="READY",e[e.CONNECTING=2]="CONNECTING"}(Xt||(Xt={}));var In,wn={accept:"application/json, text/javascript","content-encoding":"amz-1.0","content-type":"application/json; charset=UTF-8"},Tn=3e5,On=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.socketStatus=Xt.CLOSED,t.keepAliveTimeout=Tn,t.subscriptionObserverMap=new Map,t.promiseArray=[],t}return dn(t,e),t.prototype.getProviderName=function(){return"AWSAppSyncRealTimeProvider"},t.prototype.newClient=function(){throw new Error("Not used here")},t.prototype.publish=function(e,t,n){return vn(this,void 0,void 0,(function(){return gn(this,(function(e){throw new Error("Operation not supported")}))}))},t.prototype.subscribe=function(e,t){var n=this,r=t.appSyncGraphqlEndpoint;return new xt((function(e){if(r){var i=(0,qt.v4)();return n._startSubscriptionWithAWSAppSyncRealTime({options:t,observer:e,subscriptionId:i}).catch((function(t){e.error({errors:[yn({},new ne(In.REALTIME_SUBSCRIPTION_INIT_ERROR+": "+t))]}),e.complete()})),function(){return vn(n,void 0,void 0,(function(){var e,t;return gn(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,3,4]),[4,this._waitForSubscriptionToBeConnected(i)];case 1:if(n.sent(),!(e=(this.subscriptionObserverMap.get(i)||{}).subscriptionState))return[2];if(e!==Ht.CONNECTED)throw new Error("Subscription never connected");return this._sendUnsubscriptionMessage(i),[3,4];case 2:return t=n.sent(),bn.debug("Error while unsubscribing "+t),[3,4];case 3:return this._removeSubscriptionObserver(i),[7];case 4:return[2]}}))}))}}e.error({errors:[yn({},new ne("Subscribe only available for AWS AppSync endpoint"))]}),e.complete()}))},Object.defineProperty(t.prototype,"isSSLEnabled",{get:function(){return!this.options.aws_appsync_dangerously_connect_to_http_endpoint_for_testing},enumerable:!0,configurable:!0}),t.prototype._startSubscriptionWithAWSAppSyncRealTime=function(e){var t=e.options,n=e.observer,r=e.subscriptionId;return vn(this,void 0,void 0,(function(){var e,i,o,s,a,c,u,l,f,p,h,d,y,v,g,_,b,m,E,I,w,T,O,S,N,A,k=this;return gn(this,(function(C){switch(C.label){case 0:return e=t.appSyncGraphqlEndpoint,i=t.authenticationType,o=t.query,s=t.variables,a=t.apiKey,c=t.region,u=t.graphql_headers,l=void 0===u?function(){return{}}:u,f=t.additionalHeaders,p=void 0===f?{}:f,h=Ht.PENDING,d={query:o,variables:s},this.subscriptionObserverMap.set(r,{observer:n,query:o,variables:s,subscriptionState:h,startAckTimeoutId:null}),y=JSON.stringify(d),g=[{}],[4,this._awsRealTimeHeaderBasedAuth({apiKey:a,appSyncGraphqlEndpoint:e,authenticationType:i,payload:y,canonicalUri:"",region:c})];case 1:return _=[yn.apply(void 0,g.concat([C.sent()]))],[4,l()];case 2:v=yn.apply(void 0,[yn.apply(void 0,[yn.apply(void 0,_.concat([C.sent()])),p]),(A={},A["x-amz-user-agent"]=Rt.gT.userAgent,A)]),b={id:r,payload:{data:y,extensions:{authorization:yn({},v)}},type:Wt.GQL_START},m=JSON.stringify(b),C.label=3;case 3:return C.trys.push([3,5,,6]),[4,this._initializeWebSocketConnection({apiKey:a,appSyncGraphqlEndpoint:e,authenticationType:i,region:c})];case 4:return C.sent(),[3,6];case 5:return E=C.sent(),bn.debug({err:E}),I=E.message,w=void 0===I?"":I,n.error({errors:[yn({},new ne(In.CONNECTION_FAILED+": "+w))]}),n.complete(),"function"===typeof(T=(this.subscriptionObserverMap.get(r)||{}).subscriptionFailedCallback)&&T(),[2];case 6:return O=this.subscriptionObserverMap.get(r),S=O.subscriptionFailedCallback,N=O.subscriptionReadyCallback,this.subscriptionObserverMap.set(r,{observer:n,subscriptionState:h,variables:s,query:o,subscriptionReadyCallback:N,subscriptionFailedCallback:S,startAckTimeoutId:setTimeout((function(){k._timeoutStartSubscriptionAck.call(k,r)}),15e3)}),this.awsRealTimeSocket&&this.awsRealTimeSocket.send(m),[2]}}))}))},t.prototype._waitForSubscriptionToBeConnected=function(e){return vn(this,void 0,void 0,(function(){var t=this;return gn(this,(function(n){return this.subscriptionObserverMap.get(e).subscriptionState===Ht.PENDING?[2,new Promise((function(n,r){var i=t.subscriptionObserverMap.get(e),o=i.observer,s=i.subscriptionState,a=i.variables,c=i.query;t.subscriptionObserverMap.set(e,{observer:o,subscriptionState:s,variables:a,query:c,subscriptionReadyCallback:n,subscriptionFailedCallback:r})}))]:[2]}))}))},t.prototype._sendUnsubscriptionMessage=function(e){try{if(this.awsRealTimeSocket&&this.awsRealTimeSocket.readyState===WebSocket.OPEN&&this.socketStatus===Xt.READY){var t={id:e,type:Wt.GQL_STOP},n=JSON.stringify(t);this.awsRealTimeSocket.send(n)}}catch(r){bn.debug({err:r})}},t.prototype._removeSubscriptionObserver=function(e){this.subscriptionObserverMap.delete(e),setTimeout(this._closeSocketIfRequired.bind(this),1e3)},t.prototype._closeSocketIfRequired=function(){if(!(this.subscriptionObserverMap.size>0))if(this.awsRealTimeSocket)if(this.awsRealTimeSocket.bufferedAmount>0)setTimeout(this._closeSocketIfRequired.bind(this),1e3);else{bn.debug("closing WebSocket..."),clearTimeout(this.keepAliveTimeoutId);var e=this.awsRealTimeSocket;e.onclose=void 0,e.onerror=void 0,e.close(1e3),this.awsRealTimeSocket=null,this.socketStatus=Xt.CLOSED}else this.socketStatus=Xt.CLOSED},t.prototype._handleIncomingSubscriptionMessage=function(e){bn.debug("subscription message from AWS AppSync RealTime: "+e.data);var t=JSON.parse(e.data),n=t.id,r=void 0===n?"":n,i=t.payload,o=t.type,s=this.subscriptionObserverMap.get(r)||{},a=s.observer,c=void 0===a?null:a,u=s.query,l=void 0===u?"":u,f=s.variables,p=void 0===f?{}:f,h=s.startAckTimeoutId,d=s.subscriptionReadyCallback,y=s.subscriptionFailedCallback;if(bn.debug({id:r,observer:c,query:l,variables:p}),o===Wt.GQL_DATA&&i&&i.data)c?c.next(i):bn.debug("observer not found for id: "+r);else if(o!==Wt.GQL_START_ACK){if(o===Wt.GQL_CONNECTION_KEEP_ALIVE)return clearTimeout(this.keepAliveTimeoutId),void(this.keepAliveTimeoutId=setTimeout(this._errorDisconnect.bind(this,In.TIMEOUT_DISCONNECT),this.keepAliveTimeout));if(o===Wt.GQL_ERROR){v=Ht.FAILED;this.subscriptionObserverMap.set(r,{observer:c,query:l,variables:p,startAckTimeoutId:h,subscriptionReadyCallback:d,subscriptionFailedCallback:y,subscriptionState:v}),c.error({errors:[yn({},new ne(In.CONNECTION_FAILED+": "+JSON.stringify(i)))]}),clearTimeout(h),c.complete(),"function"===typeof y&&y()}}else{bn.debug("subscription ready for "+JSON.stringify({query:l,variables:p})),"function"===typeof d&&d(),clearTimeout(h),function(e,t,n){fn.Xb.dispatch("api",{event:e,data:t,message:n},"PubSub",mn)}(In.SUBSCRIPTION_ACK,{query:l,variables:p},"Connection established for subscription");var v=Ht.CONNECTED;this.subscriptionObserverMap.set(r,{observer:c,query:l,variables:p,startAckTimeoutId:null,subscriptionState:v,subscriptionReadyCallback:d,subscriptionFailedCallback:y})}},t.prototype._errorDisconnect=function(e){bn.debug("Disconnect error: "+e),this.subscriptionObserverMap.forEach((function(t){var n=t.observer;n&&!n.closed&&n.error({errors:[yn({},new ne(e))]})})),this.subscriptionObserverMap.clear(),this.awsRealTimeSocket&&this.awsRealTimeSocket.close(),this.socketStatus=Xt.CLOSED},t.prototype._timeoutStartSubscriptionAck=function(e){var t=this.subscriptionObserverMap.get(e)||{},n=t.observer,r=t.query,i=t.variables;n&&(this.subscriptionObserverMap.set(e,{observer:n,query:r,variables:i,subscriptionState:Ht.FAILED}),n&&!n.closed&&(n.error({errors:[yn({},new ne("Subscription timeout "+JSON.stringify({query:r,variables:i})))]}),n.complete()),bn.debug("timeoutStartSubscription",JSON.stringify({query:r,variables:i})))},t.prototype._initializeWebSocketConnection=function(e){var t=this,n=e.appSyncGraphqlEndpoint,r=e.authenticationType,i=e.apiKey,o=e.region;if(this.socketStatus!==Xt.READY)return new Promise((function(e,s){return vn(t,void 0,void 0,(function(){var t,a,c,u,l,f,p,h,d,y;return gn(this,(function(v){switch(v.label){case 0:if(this.promiseArray.push({res:e,rej:s}),this.socketStatus!==Xt.CLOSED)return[3,5];v.label=1;case 1:return v.trys.push([1,4,,5]),this.socketStatus=Xt.CONNECTING,t=this.isSSLEnabled?"wss://":"ws://",a=n.replace("https://",t).replace("http://",t).replace("appsync-api","appsync-realtime-api").replace("gogi-beta","grt-beta"),c="{}",f=(l=JSON).stringify,[4,this._awsRealTimeHeaderBasedAuth({authenticationType:r,payload:c,canonicalUri:"/connect",apiKey:i,appSyncGraphqlEndpoint:n,region:o})];case 2:return u=f.apply(l,[v.sent()]),p=ln.Buffer.from(u).toString("base64"),h=ln.Buffer.from(c).toString("base64"),d=a+"?header="+p+"&payload="+h,[4,this._initializeRetryableHandshake({awsRealTimeUrl:d})];case 3:return v.sent(),this.promiseArray.forEach((function(e){var t=e.res;bn.debug("Notifying connection successful"),t()})),this.socketStatus=Xt.READY,this.promiseArray=[],[3,5];case 4:return y=v.sent(),this.promiseArray.forEach((function(e){return(0,e.rej)(y)})),this.promiseArray=[],this.awsRealTimeSocket&&this.awsRealTimeSocket.readyState===WebSocket.OPEN&&this.awsRealTimeSocket.close(3001),this.awsRealTimeSocket=null,this.socketStatus=Xt.CLOSED,[3,5];case 5:return[2]}}))}))}))},t.prototype._initializeRetryableHandshake=function(e){var t=e.awsRealTimeUrl;return vn(this,void 0,void 0,(function(){return gn(this,(function(e){switch(e.label){case 0:return bn.debug("Initializaling retryable Handshake"),[4,(0,pn.Xm)(this._initializeHandshake.bind(this),[{awsRealTimeUrl:t}],5e3)];case 1:return e.sent(),[2]}}))}))},t.prototype._initializeHandshake=function(e){var t=e.awsRealTimeUrl;return vn(this,void 0,void 0,(function(){var e,n,r,i=this;return gn(this,(function(o){switch(o.label){case 0:bn.debug("Initializing handshake "+t),o.label=1;case 1:return o.trys.push([1,4,,5]),[4,new Promise((function(e,n){var r=new WebSocket(t,"graphql-ws");r.onerror=function(){bn.debug("WebSocket connection error")},r.onclose=function(){n(new Error("Connection handshake error"))},r.onopen=function(){return i.awsRealTimeSocket=r,e()}}))];case 2:return o.sent(),[4,new Promise((function(e,t){var n=!1;i.awsRealTimeSocket.onerror=function(e){bn.debug("WebSocket error "+JSON.stringify(e))},i.awsRealTimeSocket.onclose=function(e){bn.debug("WebSocket closed "+e.reason),t(new Error(JSON.stringify(e)))},i.awsRealTimeSocket.onmessage=function(r){bn.debug("subscription message from AWS AppSyncRealTime: "+r.data+" ");var o=JSON.parse(r.data),s=o.type,a=o.payload,c=(void 0===a?{}:a).connectionTimeoutMs,u=void 0===c?Tn:c;if(s===Wt.GQL_CONNECTION_ACK)return n=!0,i.keepAliveTimeout=u,i.awsRealTimeSocket.onmessage=i._handleIncomingSubscriptionMessage.bind(i),i.awsRealTimeSocket.onerror=function(e){bn.debug(e),i._errorDisconnect(In.CONNECTION_CLOSED)},i.awsRealTimeSocket.onclose=function(e){bn.debug("WebSocket closed "+e.reason),i._errorDisconnect(In.CONNECTION_CLOSED)},void e("Cool, connected to AWS AppSyncRealTime");if(s===Wt.GQL_CONNECTION_ERROR){var l=o.payload,f=(void 0===l?{}:l).errors,p=_n(void 0===f?[]:f,1)[0],h=void 0===p?{}:p,d=h.errorType,y=void 0===d?"":d,v=h.errorCode;t({errorType:y,errorCode:void 0===v?0:v})}};var r={type:Wt.GQL_CONNECTION_INIT};i.awsRealTimeSocket.send(JSON.stringify(r)),setTimeout(function(){n||t(new Error("Connection timeout: ack from AWSRealTime was not received on 15000 ms"))}.bind(i),15e3)}))];case 3:return o.sent(),[3,5];case 4:throw e=o.sent(),n=e.errorType,r=e.errorCode,En.includes(r)?new pn.V2(n):n?new Error(n):e;case 5:return[2]}}))}))},t.prototype._awsRealTimeHeaderBasedAuth=function(e){var t=e.authenticationType,n=e.payload,r=e.canonicalUri,i=e.appSyncGraphqlEndpoint,o=e.apiKey,s=e.region;return vn(this,void 0,void 0,(function(){var e,a,c;return gn(this,(function(u){switch(u.label){case 0:return e={API_KEY:this._awsRealTimeApiKeyHeader.bind(this),AWS_IAM:this._awsRealTimeIAMHeader.bind(this),OPENID_CONNECT:this._awsRealTimeOPENIDHeader.bind(this),AMAZON_COGNITO_USER_POOLS:this._awsRealTimeCUPHeader.bind(this)},"function"!==typeof(a=e[t])?(bn.debug("Authentication type "+t+" not supported"),[2,""]):(c=w.Qc(i).host,[4,a({payload:n,canonicalUri:r,appSyncGraphqlEndpoint:i,apiKey:o,region:s,host:c})]);case 1:return[2,u.sent()]}}))}))},t.prototype._awsRealTimeCUPHeader=function(e){var t=e.host;return vn(this,void 0,void 0,(function(){return gn(this,(function(e){switch(e.label){case 0:return[4,hn.ZP.currentSession()];case 1:return[2,{Authorization:e.sent().getAccessToken().getJwtToken(),host:t}]}}))}))},t.prototype._awsRealTimeOPENIDHeader=function(e){var t=e.host;return vn(this,void 0,void 0,(function(){var e,n,r;return gn(this,(function(i){switch(i.label){case 0:return[4,v.getItem("federatedInfo")];case 1:return(n=i.sent())?(e=n.token,[3,4]):[3,2];case 2:return[4,hn.ZP.currentAuthenticatedUser()];case 3:(r=i.sent())&&(e=r.token),i.label=4;case 4:if(!e)throw new Error("No federated jwt");return[2,{Authorization:e,host:t}]}}))}))},t.prototype._awsRealTimeApiKeyHeader=function(e){var t=e.apiKey,n=e.host;return vn(this,void 0,void 0,(function(){var e,r;return gn(this,(function(i){return e=new Date,r=e.toISOString().replace(/[:\-]|\.\d{3}/g,""),[2,{host:n,"x-amz-date":r,"x-api-key":t}]}))}))},t.prototype._awsRealTimeIAMHeader=function(e){var t=e.payload,n=e.canonicalUri,r=e.appSyncGraphqlEndpoint,i=e.region;return vn(this,void 0,void 0,(function(){var e,o,s;return gn(this,(function(a){switch(a.label){case 0:return e={region:i,service:"appsync"},[4,this._ensureCredentials()];case 1:if(!a.sent())throw new Error("No credentials");return[4,g.cN.get().then((function(e){return{secret_key:e.secretAccessKey,access_key:e.accessKeyId,session_token:e.sessionToken}}))];case 2:return o=a.sent(),s={url:""+r+n,data:t,method:"POST",headers:yn({},wn)},[2,U.sign(s,o,e).headers]}}))}))},t.prototype._ensureCredentials=function(){return g.cN.get().then((function(e){if(!e)return!1;var t=g.cN.shear(e);return bn.debug("set credentials for AWSAppSyncRealTimeProvider",t),!0})).catch((function(e){return bn.warn("ensure credentials error",e),!1}))},t}(Vt),Sn=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(t){o(t)}}function a(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},Nn=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},An=(0,Ut.lC)().isNode,kn=new l.k("PubSub"),Cn=new(function(){function e(e){this._options=e,kn.debug("PubSub Options",this._options),this._pluggables=[],this.subscribe=this.subscribe.bind(this)}return Object.defineProperty(e.prototype,"awsAppSyncProvider",{get:function(){return this._awsAppSyncProvider||(this._awsAppSyncProvider=new un(this._options)),this._awsAppSyncProvider},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"awsAppSyncRealTimeProvider",{get:function(){return this._awsAppSyncRealTimeProvider||(this._awsAppSyncRealTimeProvider=new On(this._options)),this._awsAppSyncRealTimeProvider},enumerable:!0,configurable:!0}),e.prototype.getModuleName=function(){return"PubSub"},e.prototype.configure=function(e){var t=this,n=e?e.PubSub||e:{};return kn.debug("configure PubSub",{opt:n}),this._options=Object.assign({},this._options,n),this._pluggables.map((function(e){return e.configure(t._options)})),this._options},e.prototype.addPluggable=function(e){return Sn(this,void 0,void 0,(function(){return Nn(this,(function(t){return e&&"PubSub"===e.getCategory()?(this._pluggables.push(e),[2,e.configure(this._options)]):[2]}))}))},e.prototype.getProviderByName=function(e){return e===Mt?this.awsAppSyncProvider:e===Lt?this.awsAppSyncRealTimeProvider:this._pluggables.find((function(t){return t.getProviderName()===e}))},e.prototype.getProviders=function(e){void 0===e&&(e={});var t=e.provider;if(!t)return this._pluggables;var n=this.getProviderByName(t);if(!n)throw new Error("Could not find provider named "+t);return[n]},e.prototype.publish=function(e,t,n){return Sn(this,void 0,void 0,(function(){return Nn(this,(function(r){return[2,Promise.all(this.getProviders(n).map((function(r){return r.publish(e,t,n)})))]}))}))},e.prototype.subscribe=function(e,t){if(An&&this._options&&this._options.ssr)throw new Error("Subscriptions are not supported for Server-Side Rendering (SSR)");kn.debug("subscribe options",t);var n=this.getProviders(t);return new xt((function(r){var i=n.map((function(n){return{provider:n,observable:n.subscribe(e,t)}})).map((function(e){var t=e.provider;return e.observable.subscribe({start:console.error,next:function(e){return r.next({provider:t,value:e})},error:function(e){return r.error({provider:t,error:e})}})}));return function(){return i.forEach((function(e){return e.unsubscribe()}))}}))},e}())(null);i.dQ.register(Cn),function(e){e.CONNECTION_CLOSED="Connection closed",e.CONNECTION_FAILED="Connection failed",e.REALTIME_SUBSCRIPTION_INIT_ERROR="AppSync Realtime subscription init error",e.SUBSCRIPTION_ACK="Subscription ack",e.TIMEOUT_DISCONNECT="Timeout disconnect"}(In||(In={}));var Rn,Pn,Mn=Cn;!function(e){e.API_KEY="API_KEY",e.AWS_IAM="AWS_IAM",e.OPENID_CONNECT="OPENID_CONNECT",e.AMAZON_COGNITO_USER_POOLS="AMAZON_COGNITO_USER_POOLS"}(Rn||(Rn={})),function(e){e.NO_API_KEY="No api-key configured",e.NO_CURRENT_USER="No current user",e.NO_CREDENTIALS="No credentials",e.NO_FEDERATED_JWT="No federated jwt"}(Pn||(Pn={}));var Ln=function(){return(Ln=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Dn=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(t){o(t)}}function a(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},xn=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},Un=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},Bn=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},qn=new l.k("GraphQLAPI"),jn=function(){function e(e){this._api=null,this.Auth=hn.ZP,this.Cache=v,this.Credentials=g.cN,this._options=e,qn.debug("API Options",this._options)}return e.prototype.getModuleName=function(){return"GraphQLAPI"},e.prototype.configure=function(e){var t=e||{},n=t.API,r=void 0===n?{}:n,i=Un(t,["API"]),o=Ln(Ln({},i),r);return qn.debug("configure GraphQL API",{opt:o}),o.aws_project_region&&(o=Object.assign({},o,{region:o.aws_project_region,header:{}})),"undefined"!==typeof o.graphql_headers&&"function"!==typeof o.graphql_headers&&(qn.warn("graphql_headers should be a function"),o.graphql_headers=void 0),this._options=Object.assign({},this._options,o),this.createInstance(),this._options},e.prototype.createInstance=function(){return qn.debug("create Rest instance"),this._options?(this._api=new K(this._options),this._api.Credentials=this.Credentials,!0):Promise.reject("API not configured")},e.prototype._headerBasedAuth=function(e){return Dn(this,void 0,void 0,(function(){var t,n,r,i,o,s,a,c;return xn(this,(function(u){switch(u.label){case 0:switch(t=this._options,n=t.aws_appsync_authenticationType,r=t.aws_appsync_apiKey,i={},e||n||"AWS_IAM"){case"API_KEY":return[3,1];case"AWS_IAM":return[3,2];case"OPENID_CONNECT":return[3,4];case"AMAZON_COGNITO_USER_POOLS":return[3,11]}return[3,15];case 1:if(!r)throw new Error(Pn.NO_API_KEY);return i={Authorization:null,"X-Api-Key":r},[3,16];case 2:return[4,this._ensureCredentials()];case 3:if(!u.sent())throw new Error(Pn.NO_CREDENTIALS);return[3,16];case 4:return u.trys.push([4,9,,10]),o=void 0,[4,v.getItem("federatedInfo")];case 5:return(s=u.sent())?(o=s.token,[3,8]):[3,6];case 6:return[4,hn.ZP.currentAuthenticatedUser()];case 7:(a=u.sent())&&(o=a.token),u.label=8;case 8:if(!o)throw new Error(Pn.NO_FEDERATED_JWT);return i={Authorization:o},[3,10];case 9:throw u.sent(),new Error(Pn.NO_CURRENT_USER);case 10:return[3,16];case 11:return u.trys.push([11,13,,14]),[4,this.Auth.currentSession()];case 12:return c=u.sent(),i={Authorization:c.getAccessToken().getJwtToken()},[3,14];case 13:throw u.sent(),new Error(Pn.NO_CURRENT_USER);case 14:return[3,16];case 15:return i={Authorization:null},[3,16];case 16:return[2,i]}}))}))},e.prototype.getGraphqlOperationType=function(e){var t=Be(e);return Bn(t.definitions,1)[0].operation},e.prototype.graphql=function(e,t){var n=e.query,r=e.variables,i=void 0===r?{}:r,o=e.authMode,s=Be("string"===typeof n?n:ae(n)),a=Bn(s.definitions.filter((function(e){return"OperationDefinition"===e.kind})),1)[0],c=(void 0===a?{}:a).operation;switch(c){case"query":case"mutation":var u=this._api.getCancellableToken(),l={cancellableToken:u},f=this._graphql({query:s,variables:i,authMode:o},t,l);return this._api.updateRequestToBeCancellable(f,u),f;case"subscription":return this._graphqlSubscribe({query:s,variables:i,authMode:o},t)}throw new Error("invalid operation type: "+c)},e.prototype._graphql=function(e,t,n){var r=e.query,i=e.variables,o=e.authMode;return void 0===t&&(t={}),void 0===n&&(n={}),Dn(this,void 0,void 0,(function(){var e,s,a,c,u,l,f,p,h,d,y,v,g,_,b,m,E,I,w,T,O;return xn(this,(function(S){switch(S.label){case 0:return this._api?[3,2]:[4,this.createInstance()];case 1:S.sent(),S.label=2;case 2:return e=this._options,s=e.aws_appsync_region,a=e.aws_appsync_graphqlEndpoint,c=e.graphql_headers,u=void 0===c?function(){return{}}:c,l=e.graphql_endpoint,f=e.graphql_endpoint_iam_region,h=[{}],(d=!l)?[4,this._headerBasedAuth(o)]:[3,4];case 3:d=S.sent(),S.label=4;case 4:return y=[Ln.apply(void 0,h.concat([d]))],(v=l)?f?[4,this._headerBasedAuth(o)]:[3,6]:[3,8];case 5:return g=S.sent(),[3,7];case 6:g={Authorization:null},S.label=7;case 7:v=g,S.label=8;case 8:return _=[Ln.apply(void 0,y.concat([v]))],[4,u({query:r,variables:i})];case 9:if(p=Ln.apply(void 0,[Ln.apply(void 0,[Ln.apply(void 0,_.concat([S.sent()])),t]),!l&&(O={},O["x-amz-user-agent"]=Rt.gT.userAgent,O)]),b={query:ae(r),variables:i},m=Object.assign({headers:p,body:b,signerServiceInfo:{service:l?"execute-api":"appsync",region:l?f:s}},n),!(E=l||a))throw{data:{},errors:[new ne("No graphql endpoint provided.")]};S.label=10;case 10:return S.trys.push([10,12,,13]),[4,this._api.post(E,m)];case 11:return I=S.sent(),[3,13];case 12:if(w=S.sent(),this._api.isCancel(w))throw w;return I={data:{},errors:[new ne(w.message,null,null,null,null,w)]},[3,13];case 13:if((T=I.errors)&&T.length)throw I;return[2,I]}}))}))},e.prototype.isCancel=function(e){return this._api.isCancel(e)},e.prototype.cancel=function(e,t){return this._api.cancel(e,t)},e.prototype._graphqlSubscribe=function(e,t){var n=e.query,r=e.variables,i=e.authMode;void 0===t&&(t={});var o=this._options,s=o.aws_appsync_region,a=o.aws_appsync_graphqlEndpoint,c=o.aws_appsync_authenticationType,u=o.aws_appsync_apiKey,l=o.graphql_headers,f=void 0===l?function(){return{}}:l,p=i||c||"AWS_IAM";if(Mn&&"function"===typeof Mn.subscribe)return Mn.subscribe("",{provider:Lt,appSyncGraphqlEndpoint:a,authenticationType:p,apiKey:u,query:ae(n),region:s,variables:r,graphql_headers:f,additionalHeaders:t});throw qn.debug("No pubsub module applied for subscription"),new Error("No pubsub module applied for subscription")},e.prototype._ensureCredentials=function(){var e=this;return this.Credentials.get().then((function(t){if(!t)return!1;var n=e.Credentials.shear(t);return qn.debug("set credentials for api",n),!0})).catch((function(e){return qn.warn("ensure credentials error",e),!1}))},e}(),Fn=new jn(null);i.dQ.register(Fn);var Vn=function(){return(Vn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Gn=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(t){o(t)}}function a(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},zn=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},Kn=new l.k("API"),Qn=new(function(){function e(e){this.Auth=r.g,this.Cache=v,this.Credentials=g.cN,this._options=e,this._restApi=new X(e),this._graphqlApi=new jn(e),Kn.debug("API Options",this._options)}return e.prototype.getModuleName=function(){return"API"},e.prototype.configure=function(e){this._options=Object.assign({},this._options,e),this._restApi.Credentials=this.Credentials,this._graphqlApi.Auth=this.Auth,this._graphqlApi.Cache=this.Cache,this._graphqlApi.Credentials=this.Credentials;var t=this._restApi.configure(this._options),n=this._graphqlApi.configure(this._options);return Vn(Vn({},t),n)},e.prototype.get=function(e,t,n){return this._restApi.get(e,t,n)},e.prototype.post=function(e,t,n){return this._restApi.post(e,t,n)},e.prototype.put=function(e,t,n){return this._restApi.put(e,t,n)},e.prototype.patch=function(e,t,n){return this._restApi.patch(e,t,n)},e.prototype.del=function(e,t,n){return this._restApi.del(e,t,n)},e.prototype.head=function(e,t,n){return this._restApi.head(e,t,n)},e.prototype.isCancel=function(e){return this._restApi.isCancel(e)},e.prototype.cancel=function(e,t){return this._restApi.cancel(e,t)},e.prototype.endpoint=function(e){return Gn(this,void 0,void 0,(function(){return zn(this,(function(t){return[2,this._restApi.endpoint(e)]}))}))},e.prototype.getGraphqlOperationType=function(e){return this._graphqlApi.getGraphqlOperationType(e)},e.prototype.graphql=function(e,t){return this._graphqlApi.graphql(e,t)},e}())(null);i.dQ.register(Qn)},3550:function(e,t,n){"use strict";var r=n(5914);n(8243);t.ZP=r.g},5408:function(e,t,n){var r=n(1330),i=n(4701),o=i;o.v1=r,o.v4=i,e.exports=o},1178:function(e){for(var t=[],n=0;n<256;++n)t[n]=(n+256).toString(16).substr(1);e.exports=function(e,n){var r=n||0,i=t;return[i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]]].join("")}},9513:function(e){var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var n=new Uint8Array(16);e.exports=function(){return t(n),n}}else{var r=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0===(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}},1330:function(e,t,n){var r,i,o=n(9513),s=n(1178),a=0,c=0;e.exports=function(e,t,n){var u=t&&n||0,l=t||[],f=(e=e||{}).node||r,p=void 0!==e.clockseq?e.clockseq:i;if(null==f||null==p){var h=o();null==f&&(f=r=[1|h[0],h[1],h[2],h[3],h[4],h[5]]),null==p&&(p=i=16383&(h[6]<<8|h[7]))}var d=void 0!==e.msecs?e.msecs:(new Date).getTime(),y=void 0!==e.nsecs?e.nsecs:c+1,v=d-a+(y-c)/1e4;if(v<0&&void 0===e.clockseq&&(p=p+1&16383),(v<0||d>a)&&void 0===e.nsecs&&(y=0),y>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=d,c=y,i=p;var g=(1e4*(268435455&(d+=122192928e5))+y)%4294967296;l[u++]=g>>>24&255,l[u++]=g>>>16&255,l[u++]=g>>>8&255,l[u++]=255&g;var _=d/4294967296*1e4&268435455;l[u++]=_>>>8&255,l[u++]=255&_,l[u++]=_>>>24&15|16,l[u++]=_>>>16&255,l[u++]=p>>>8|128,l[u++]=255&p;for(var b=0;b<6;++b)l[u+b]=f[b];return t||s(l)}},4701:function(e,t,n){var r=n(9513),i=n(1178);e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||r)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var a=0;a<16;++a)t[o+a]=s[a];return t||i(s)}},7449:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(9945),i=function(){function e(){this.state=Int32Array.from(r.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(e){if(this.finished)throw new Error("Attempted to update an already finished hash.");var t=0,n=e.byteLength;if(this.bytesHashed+=n,8*this.bytesHashed>r.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;n>0;)this.buffer[this.bufferLength++]=e[t++],n--,this.bufferLength===r.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},e.prototype.digest=function(){if(!this.finished){var e=8*this.bytesHashed,t=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),n=this.bufferLength;if(t.setUint8(this.bufferLength++,128),n%r.BLOCK_SIZE>=r.BLOCK_SIZE-8){for(var i=this.bufferLength;i<r.BLOCK_SIZE;i++)t.setUint8(i,0);this.hashBuffer(),this.bufferLength=0}for(i=this.bufferLength;i<r.BLOCK_SIZE-8;i++)t.setUint8(i,0);t.setUint32(r.BLOCK_SIZE-8,Math.floor(e/4294967296),!0),t.setUint32(r.BLOCK_SIZE-4,e),this.hashBuffer(),this.finished=!0}var o=new Uint8Array(r.DIGEST_LENGTH);for(i=0;i<8;i++)o[4*i]=this.state[i]>>>24&255,o[4*i+1]=this.state[i]>>>16&255,o[4*i+2]=this.state[i]>>>8&255,o[4*i+3]=this.state[i]>>>0&255;return o},e.prototype.hashBuffer=function(){for(var e=this.buffer,t=this.state,n=t[0],i=t[1],o=t[2],s=t[3],a=t[4],c=t[5],u=t[6],l=t[7],f=0;f<r.BLOCK_SIZE;f++){if(f<16)this.temp[f]=(255&e[4*f])<<24|(255&e[4*f+1])<<16|(255&e[4*f+2])<<8|255&e[4*f+3];else{var p=this.temp[f-2],h=(p>>>17|p<<15)^(p>>>19|p<<13)^p>>>10,d=((p=this.temp[f-15])>>>7|p<<25)^(p>>>18|p<<14)^p>>>3;this.temp[f]=(h+this.temp[f-7]|0)+(d+this.temp[f-16]|0)}var y=(((a>>>6|a<<26)^(a>>>11|a<<21)^(a>>>25|a<<7))+(a&c^~a&u)|0)+(l+(r.KEY[f]+this.temp[f]|0)|0)|0,v=((n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10))+(n&i^n&o^i&o)|0;l=u,u=c,c=a,a=s+y|0,s=o,o=i,i=n,n=y+v|0}t[0]+=n,t[1]+=i,t[2]+=o,t[3]+=s,t[4]+=a,t[5]+=c,t[6]+=u,t[7]+=l},e}();t.RawSha256=i},9945:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BLOCK_SIZE=64,t.DIGEST_LENGTH=32,t.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),t.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],t.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},1938:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(655).__exportStar(n(5430),t)},5430:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(655),i=n(9945),o=n(7449),s=n(1204),a=function(){function e(e){if(this.hash=new o.RawSha256,e){this.outer=new o.RawSha256;var t=function(e){var t=c(e);if(t.byteLength>i.BLOCK_SIZE){var n=new o.RawSha256;n.update(t),t=n.digest()}var r=new Uint8Array(i.BLOCK_SIZE);return r.set(t),r}(e),n=new Uint8Array(i.BLOCK_SIZE);n.set(t);for(var r=0;r<i.BLOCK_SIZE;r++)t[r]^=54,n[r]^=92;this.hash.update(t),this.outer.update(n);for(r=0;r<t.byteLength;r++)t[r]=0}}return e.prototype.update=function(e){if(!function(e){if("string"===typeof e)return 0===e.length;return 0===e.byteLength}(e)&&!this.error)try{this.hash.update(c(e))}catch(t){this.error=t}},e.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},e.prototype.digest=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){return[2,this.digestSync()]}))}))},e}();function c(e){return"string"===typeof e?s.fromUtf8(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}t.Sha256=a},1204:function(e,t,n){"use strict";n.r(t),n.d(t,{fromUtf8:function(){return r},toUtf8:function(){return i}});var r=function(e){return"function"===typeof TextEncoder?function(e){return(new TextEncoder).encode(e)}(e):function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e.charCodeAt(n);if(i<128)t.push(i);else if(i<2048)t.push(i>>6|192,63&i|128);else if(n+1<e.length&&55296===(64512&i)&&56320===(64512&e.charCodeAt(n+1))){var o=65536+((1023&i)<<10)+(1023&e.charCodeAt(++n));t.push(o>>18|240,o>>12&63|128,o>>6&63|128,63&o|128)}else t.push(i>>12|224,i>>6&63|128,63&i|128)}return Uint8Array.from(t)}(e)},i=function(e){return"function"===typeof TextDecoder?function(e){return new TextDecoder("utf-8").decode(e)}(e):function(e){for(var t="",n=0,r=e.length;n<r;n++){var i=e[n];if(i<128)t+=String.fromCharCode(i);else if(192<=i&&i<224){var o=e[++n];t+=String.fromCharCode((31&i)<<6|63&o)}else if(240<=i&&i<365){var s="%"+[i,e[++n],e[++n],e[++n]].map((function(e){return e.toString(16)})).join("%");t+=decodeURIComponent(s)}else t+=String.fromCharCode((15&i)<<12|(63&e[++n])<<6|63&e[++n])}return t}(e)}},8295:function(e,t,n){var r;r=function(){return function(e){var t=e.localStorage||function(){var e={};return{setItem:function(t,n){e[t]=n},getItem:function(t){return e[t]},removeItem:function(t){delete e[t]}}}(),n=1,r=2,i=3,o=4,s=5,a=6,c=7,u=8,l=9,f=10,p=11,h=12,d=13,y=14,v=function(e,t){for(var n in e)if(e.hasOwnProperty(n)){if(!t.hasOwnProperty(n)){var r="Unknown property, "+n+". Valid properties are:";for(var i in t)t.hasOwnProperty(i)&&(r=r+" "+i);throw new Error(r)}if(typeof e[n]!==t[n])throw new Error(m(_.INVALID_TYPE,[typeof e[n],n]))}},g=function(e,t){return function(){return e.apply(t,arguments)}},_={OK:{code:0,text:"AMQJSC0000I OK."},CONNECT_TIMEOUT:{code:1,text:"AMQJSC0001E Connect timed out."},SUBSCRIBE_TIMEOUT:{code:2,text:"AMQJS0002E Subscribe timed out."},UNSUBSCRIBE_TIMEOUT:{code:3,text:"AMQJS0003E Unsubscribe timed out."},PING_TIMEOUT:{code:4,text:"AMQJS0004E Ping timed out."},INTERNAL_ERROR:{code:5,text:"AMQJS0005E Internal error. Error Message: {0}, Stack trace: {1}"},CONNACK_RETURNCODE:{code:6,text:"AMQJS0006E Bad Connack return code:{0} {1}."},SOCKET_ERROR:{code:7,text:"AMQJS0007E Socket error:{0}."},SOCKET_CLOSE:{code:8,text:"AMQJS0008I Socket closed."},MALFORMED_UTF:{code:9,text:"AMQJS0009E Malformed UTF data:{0} {1} {2}."},UNSUPPORTED:{code:10,text:"AMQJS0010E {0} is not supported by this browser."},INVALID_STATE:{code:11,text:"AMQJS0011E Invalid state {0}."},INVALID_TYPE:{code:12,text:"AMQJS0012E Invalid type {0} for {1}."},INVALID_ARGUMENT:{code:13,text:"AMQJS0013E Invalid argument {0} for {1}."},UNSUPPORTED_OPERATION:{code:14,text:"AMQJS0014E Unsupported operation."},INVALID_STORED_DATA:{code:15,text:"AMQJS0015E Invalid data in local storage key={0} value={1}."},INVALID_MQTT_MESSAGE_TYPE:{code:16,text:"AMQJS0016E Invalid MQTT message type {0}."},MALFORMED_UNICODE:{code:17,text:"AMQJS0017E Malformed Unicode string:{0} {1}."},BUFFER_FULL:{code:18,text:"AMQJS0018E Message buffer is full, maximum buffer size: {0}."}},b={0:"Connection Accepted",1:"Connection Refused: unacceptable protocol version",2:"Connection Refused: identifier rejected",3:"Connection Refused: server unavailable",4:"Connection Refused: bad user name or password",5:"Connection Refused: not authorized"},m=function(e,t){var n=e.text;if(t)for(var r,i,o=0;o<t.length;o++)if(r="{"+o+"}",(i=n.indexOf(r))>0){var s=n.substring(0,i),a=n.substring(i+r.length);n=s+t[o]+a}return n},E=[0,6,77,81,73,115,100,112,3],I=[0,4,77,81,84,84,4],w=function(e,t){for(var n in this.type=e,t)t.hasOwnProperty(n)&&(this[n]=t[n])};function T(e,t){var n,u=t,f=e[t],h=f>>4,d=f&=15;t+=1;var y=0,v=1;do{if(t==e.length)return[null,u];y+=(127&(n=e[t++]))*v,v*=128}while(0!==(128&n));var g=t+y;if(g>e.length)return[null,u];var _=new w(h);switch(h){case r:1&e[t++]&&(_.sessionPresent=!0),_.returnCode=e[t++];break;case i:var b=d>>1&3,m=N(e,t),E=C(e,t+=2,m);t+=m,b>0&&(_.messageIdentifier=N(e,t),t+=2);var I=new L(e.subarray(t,g));1==(1&d)&&(I.retained=!0),8==(8&d)&&(I.duplicate=!0),I.qos=b,I.destinationName=E,_.payloadMessage=I;break;case o:case s:case a:case c:case p:_.messageIdentifier=N(e,t);break;case l:_.messageIdentifier=N(e,t),t+=2,_.returnCode=e.subarray(t,g)}return[_,g]}function O(e,t,n){return t[n++]=e>>8,t[n++]=e%256,n}function S(e,t,n,r){return k(e,n,r=O(t,n,r)),r+t}function N(e,t){return 256*e[t]+e[t+1]}function A(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r>2047?(55296<=r&&r<=56319&&(n++,t++),t+=3):r>127?t+=2:t++}return t}function k(e,t,n){for(var r=n,i=0;i<e.length;i++){var o=e.charCodeAt(i);if(55296<=o&&o<=56319){var s=e.charCodeAt(++i);if(isNaN(s))throw new Error(m(_.MALFORMED_UNICODE,[o,s]));o=s-56320+(o-55296<<10)+65536}o<=127?t[r++]=o:o<=2047?(t[r++]=o>>6&31|192,t[r++]=63&o|128):o<=65535?(t[r++]=o>>12&15|224,t[r++]=o>>6&63|128,t[r++]=63&o|128):(t[r++]=o>>18&7|240,t[r++]=o>>12&63|128,t[r++]=o>>6&63|128,t[r++]=63&o|128)}return t}function C(e,t,n){for(var r,i="",o=t;o<t+n;){var s=e[o++];if(s<128)r=s;else{var a=e[o++]-128;if(a<0)throw new Error(m(_.MALFORMED_UTF,[s.toString(16),a.toString(16),""]));if(s<224)r=64*(s-192)+a;else{var c=e[o++]-128;if(c<0)throw new Error(m(_.MALFORMED_UTF,[s.toString(16),a.toString(16),c.toString(16)]));if(s<240)r=4096*(s-224)+64*a+c;else{var u=e[o++]-128;if(u<0)throw new Error(m(_.MALFORMED_UTF,[s.toString(16),a.toString(16),c.toString(16),u.toString(16)]));if(!(s<248))throw new Error(m(_.MALFORMED_UTF,[s.toString(16),a.toString(16),c.toString(16),u.toString(16)]));r=262144*(s-240)+4096*a+64*c+u}}}r>65535&&(r-=65536,i+=String.fromCharCode(55296+(r>>10)),r=56320+(1023&r)),i+=String.fromCharCode(r)}return i}w.prototype.encode=function(){var e,t=(15&this.type)<<4,r=0,o=[],s=0;switch(void 0!==this.messageIdentifier&&(r+=2),this.type){case n:switch(this.mqttVersion){case 3:r+=E.length+3;break;case 4:r+=I.length+3}r+=A(this.clientId)+2,void 0!==this.willMessage&&(r+=A(this.willMessage.destinationName)+2,(e=this.willMessage.payloadBytes)instanceof Uint8Array||(e=new Uint8Array(l)),r+=e.byteLength+2),void 0!==this.userName&&(r+=A(this.userName)+2),void 0!==this.password&&(r+=A(this.password)+2);break;case u:t|=2;for(var c=0;c<this.topics.length;c++)o[c]=A(this.topics[c]),r+=o[c]+2;r+=this.requestedQos.length;break;case f:for(t|=2,c=0;c<this.topics.length;c++)o[c]=A(this.topics[c]),r+=o[c]+2;break;case a:t|=2;break;case i:this.payloadMessage.duplicate&&(t|=8),t=t|=this.payloadMessage.qos<<1,this.payloadMessage.retained&&(t|=1),r+=(s=A(this.payloadMessage.destinationName))+2;var l=this.payloadMessage.payloadBytes;r+=l.byteLength,l instanceof ArrayBuffer?l=new Uint8Array(l):l instanceof Uint8Array||(l=new Uint8Array(l.buffer))}var p=function(e){var t=new Array(1),n=0;do{var r=e%128;(e>>=7)>0&&(r|=128),t[n++]=r}while(e>0&&n<4);return t}(r),h=p.length+1,d=new ArrayBuffer(r+h),y=new Uint8Array(d);if(y[0]=t,y.set(p,1),this.type==i)h=S(this.payloadMessage.destinationName,s,y,h);else if(this.type==n){switch(this.mqttVersion){case 3:y.set(E,h),h+=E.length;break;case 4:y.set(I,h),h+=I.length}var v=0;this.cleanSession&&(v=2),void 0!==this.willMessage&&(v|=4,v|=this.willMessage.qos<<3,this.willMessage.retained&&(v|=32)),void 0!==this.userName&&(v|=128),void 0!==this.password&&(v|=64),y[h++]=v,h=O(this.keepAliveInterval,y,h)}switch(void 0!==this.messageIdentifier&&(h=O(this.messageIdentifier,y,h)),this.type){case n:h=S(this.clientId,A(this.clientId),y,h),void 0!==this.willMessage&&(h=S(this.willMessage.destinationName,A(this.willMessage.destinationName),y,h),h=O(e.byteLength,y,h),y.set(e,h),h+=e.byteLength),void 0!==this.userName&&(h=S(this.userName,A(this.userName),y,h)),void 0!==this.password&&(h=S(this.password,A(this.password),y,h));break;case i:y.set(l,h);break;case u:for(c=0;c<this.topics.length;c++)h=S(this.topics[c],o[c],y,h),y[h++]=this.requestedQos[c];break;case f:for(c=0;c<this.topics.length;c++)h=S(this.topics[c],o[c],y,h)}return d};var R=function(e,t){this._client=e,this._keepAliveInterval=1e3*t,this.isReset=!1;var n=new w(h).encode(),r=function(e){return function(){return i.apply(e)}},i=function(){this.isReset?(this.isReset=!1,this._client._trace("Pinger.doPing","send PINGREQ"),this._client.socket.send(n),this.timeout=setTimeout(r(this),this._keepAliveInterval)):(this._client._trace("Pinger.doPing","Timed out"),this._client._disconnected(_.PING_TIMEOUT.code,m(_.PING_TIMEOUT)))};this.reset=function(){this.isReset=!0,clearTimeout(this.timeout),this._keepAliveInterval>0&&(this.timeout=setTimeout(r(this),this._keepAliveInterval))},this.cancel=function(){clearTimeout(this.timeout)}},P=function(e,t,n,r){t||(t=30),this.timeout=setTimeout(function(e,t,n){return function(){return e.apply(t,n)}}(n,e,r),1e3*t),this.cancel=function(){clearTimeout(this.timeout)}},M=function(n,r,i,o,s){if(!("WebSocket"in e)||null===e.WebSocket)throw new Error(m(_.UNSUPPORTED,["WebSocket"]));if(!("ArrayBuffer"in e)||null===e.ArrayBuffer)throw new Error(m(_.UNSUPPORTED,["ArrayBuffer"]));for(var a in this._trace("Paho.Client",n,r,i,o,s),this.host=r,this.port=i,this.path=o,this.uri=n,this.clientId=s,this._wsuri=null,this._localKey=r+":"+i+("/mqtt"!=o?":"+o:"")+":"+s+":",this._msg_queue=[],this._buffered_msg_queue=[],this._sentMessages={},this._receivedMessages={},this._notify_msg_sent={},this._message_identifier=1,this._sequence=0,t)0!==a.indexOf("Sent:"+this._localKey)&&0!==a.indexOf("Received:"+this._localKey)||this.restore(a)};M.prototype.host=null,M.prototype.port=null,M.prototype.path=null,M.prototype.uri=null,M.prototype.clientId=null,M.prototype.socket=null,M.prototype.connected=!1,M.prototype.maxMessageIdentifier=65536,M.prototype.connectOptions=null,M.prototype.hostIndex=null,M.prototype.onConnected=null,M.prototype.onConnectionLost=null,M.prototype.onMessageDelivered=null,M.prototype.onMessageArrived=null,M.prototype.traceFunction=null,M.prototype._msg_queue=null,M.prototype._buffered_msg_queue=null,M.prototype._connectTimeout=null,M.prototype.sendPinger=null,M.prototype.receivePinger=null,M.prototype._reconnectInterval=1,M.prototype._reconnecting=!1,M.prototype._reconnectTimeout=null,M.prototype.disconnectedPublishing=!1,M.prototype.disconnectedBufferSize=5e3,M.prototype.receiveBuffer=null,M.prototype._traceBuffer=null,M.prototype._MAX_TRACE_ENTRIES=100,M.prototype.connect=function(e){var t=this._traceMask(e,"password");if(this._trace("Client.connect",t,this.socket,this.connected),this.connected)throw new Error(m(_.INVALID_STATE,["already connected"]));if(this.socket)throw new Error(m(_.INVALID_STATE,["already connected"]));this._reconnecting&&(this._reconnectTimeout.cancel(),this._reconnectTimeout=null,this._reconnecting=!1),this.connectOptions=e,this._reconnectInterval=1,this._reconnecting=!1,e.uris?(this.hostIndex=0,this._doConnect(e.uris[0])):this._doConnect(this.uri)},M.prototype.subscribe=function(e,t){if(this._trace("Client.subscribe",e,t),!this.connected)throw new Error(m(_.INVALID_STATE,["not connected"]));var n=new w(u);n.topics=e.constructor===Array?e:[e],void 0===t.qos&&(t.qos=0),n.requestedQos=[];for(var r=0;r<n.topics.length;r++)n.requestedQos[r]=t.qos;t.onSuccess&&(n.onSuccess=function(e){t.onSuccess({invocationContext:t.invocationContext,grantedQos:e})}),t.onFailure&&(n.onFailure=function(e){t.onFailure({invocationContext:t.invocationContext,errorCode:e,errorMessage:m(e)})}),t.timeout&&(n.timeOut=new P(this,t.timeout,t.onFailure,[{invocationContext:t.invocationContext,errorCode:_.SUBSCRIBE_TIMEOUT.code,errorMessage:m(_.SUBSCRIBE_TIMEOUT)}])),this._requires_ack(n),this._schedule_message(n)},M.prototype.unsubscribe=function(e,t){if(this._trace("Client.unsubscribe",e,t),!this.connected)throw new Error(m(_.INVALID_STATE,["not connected"]));var n=new w(f);n.topics=e.constructor===Array?e:[e],t.onSuccess&&(n.callback=function(){t.onSuccess({invocationContext:t.invocationContext})}),t.timeout&&(n.timeOut=new P(this,t.timeout,t.onFailure,[{invocationContext:t.invocationContext,errorCode:_.UNSUBSCRIBE_TIMEOUT.code,errorMessage:m(_.UNSUBSCRIBE_TIMEOUT)}])),this._requires_ack(n),this._schedule_message(n)},M.prototype.send=function(e){this._trace("Client.send",e);var t=new w(i);if(t.payloadMessage=e,this.connected)e.qos>0?this._requires_ack(t):this.onMessageDelivered&&(this._notify_msg_sent[t]=this.onMessageDelivered(t.payloadMessage)),this._schedule_message(t);else{if(!this._reconnecting||!this.disconnectedPublishing)throw new Error(m(_.INVALID_STATE,["not connected"]));if(Object.keys(this._sentMessages).length+this._buffered_msg_queue.length>this.disconnectedBufferSize)throw new Error(m(_.BUFFER_FULL,[this.disconnectedBufferSize]));e.qos>0?this._requires_ack(t):(t.sequence=++this._sequence,this._buffered_msg_queue.unshift(t))}},M.prototype.disconnect=function(){if(this._trace("Client.disconnect"),this._reconnecting&&(this._reconnectTimeout.cancel(),this._reconnectTimeout=null,this._reconnecting=!1),!this.socket)throw new Error(m(_.INVALID_STATE,["not connecting or connected"]));var e=new w(y);this._notify_msg_sent[e]=g(this._disconnected,this),this._schedule_message(e)},M.prototype.getTraceLog=function(){if(null!==this._traceBuffer){for(var e in this._trace("Client.getTraceLog",new Date),this._trace("Client.getTraceLog in flight messages",this._sentMessages.length),this._sentMessages)this._trace("_sentMessages ",e,this._sentMessages[e]);for(var e in this._receivedMessages)this._trace("_receivedMessages ",e,this._receivedMessages[e]);return this._traceBuffer}},M.prototype.startTrace=function(){null===this._traceBuffer&&(this._traceBuffer=[]),this._trace("Client.startTrace",new Date,"@VERSION@-@BUILDLEVEL@")},M.prototype.stopTrace=function(){delete this._traceBuffer},M.prototype._doConnect=function(e){if(this.connectOptions.useSSL){var t=e.split(":");t[0]="wss",e=t.join(":")}this._wsuri=e,this.connected=!1,this.connectOptions.mqttVersion<4?this.socket=new WebSocket(e,["mqttv3.1"]):this.socket=new WebSocket(e,["mqtt"]),this.socket.binaryType="arraybuffer",this.socket.onopen=g(this._on_socket_open,this),this.socket.onmessage=g(this._on_socket_message,this),this.socket.onerror=g(this._on_socket_error,this),this.socket.onclose=g(this._on_socket_close,this),this.sendPinger=new R(this,this.connectOptions.keepAliveInterval),this.receivePinger=new R(this,this.connectOptions.keepAliveInterval),this._connectTimeout&&(this._connectTimeout.cancel(),this._connectTimeout=null),this._connectTimeout=new P(this,this.connectOptions.timeout,this._disconnected,[_.CONNECT_TIMEOUT.code,m(_.CONNECT_TIMEOUT)])},M.prototype._schedule_message=function(e){this._msg_queue.unshift(e),this.connected&&this._process_queue()},M.prototype.store=function(e,n){var r={type:n.type,messageIdentifier:n.messageIdentifier,version:1};switch(n.type){case i:n.pubRecReceived&&(r.pubRecReceived=!0),r.payloadMessage={};for(var o="",s=n.payloadMessage.payloadBytes,a=0;a<s.length;a++)s[a]<=15?o=o+"0"+s[a].toString(16):o+=s[a].toString(16);r.payloadMessage.payloadHex=o,r.payloadMessage.qos=n.payloadMessage.qos,r.payloadMessage.destinationName=n.payloadMessage.destinationName,n.payloadMessage.duplicate&&(r.payloadMessage.duplicate=!0),n.payloadMessage.retained&&(r.payloadMessage.retained=!0),0===e.indexOf("Sent:")&&(void 0===n.sequence&&(n.sequence=++this._sequence),r.sequence=n.sequence);break;default:throw Error(m(_.INVALID_STORED_DATA,[e+this._localKey+n.messageIdentifier,r]))}t.setItem(e+this._localKey+n.messageIdentifier,JSON.stringify(r))},M.prototype.restore=function(e){var n=t.getItem(e),r=JSON.parse(n),o=new w(r.type,r);switch(r.type){case i:for(var s=r.payloadMessage.payloadHex,a=new ArrayBuffer(s.length/2),c=new Uint8Array(a),u=0;s.length>=2;){var l=parseInt(s.substring(0,2),16);s=s.substring(2,s.length),c[u++]=l}var f=new L(c);f.qos=r.payloadMessage.qos,f.destinationName=r.payloadMessage.destinationName,r.payloadMessage.duplicate&&(f.duplicate=!0),r.payloadMessage.retained&&(f.retained=!0),o.payloadMessage=f;break;default:throw Error(m(_.INVALID_STORED_DATA,[e,n]))}0===e.indexOf("Sent:"+this._localKey)?(o.payloadMessage.duplicate=!0,this._sentMessages[o.messageIdentifier]=o):0===e.indexOf("Received:"+this._localKey)&&(this._receivedMessages[o.messageIdentifier]=o)},M.prototype._process_queue=function(){for(var e=null;e=this._msg_queue.pop();)this._socket_send(e),this._notify_msg_sent[e]&&(this._notify_msg_sent[e](),delete this._notify_msg_sent[e])},M.prototype._requires_ack=function(e){var t=Object.keys(this._sentMessages).length;if(t>this.maxMessageIdentifier)throw Error("Too many messages:"+t);for(;void 0!==this._sentMessages[this._message_identifier];)this._message_identifier++;e.messageIdentifier=this._message_identifier,this._sentMessages[e.messageIdentifier]=e,e.type===i&&this.store("Sent:",e),this._message_identifier===this.maxMessageIdentifier&&(this._message_identifier=1)},M.prototype._on_socket_open=function(){var e=new w(n,this.connectOptions);e.clientId=this.clientId,this._socket_send(e)},M.prototype._on_socket_message=function(e){this._trace("Client._on_socket_message",e.data);for(var t=this._deframeMessages(e.data),n=0;n<t.length;n+=1)this._handleMessage(t[n])},M.prototype._deframeMessages=function(e){var t=new Uint8Array(e),n=[];if(this.receiveBuffer){var r=new Uint8Array(this.receiveBuffer.length+t.length);r.set(this.receiveBuffer),r.set(t,this.receiveBuffer.length),t=r,delete this.receiveBuffer}try{for(var i=0;i<t.length;){var o=T(t,i),s=o[0];if(i=o[1],null===s)break;n.push(s)}i<t.length&&(this.receiveBuffer=t.subarray(i))}catch(c){var a="undefined"==c.hasOwnProperty("stack")?c.stack.toString():"No Error Stack Available";return void this._disconnected(_.INTERNAL_ERROR.code,m(_.INTERNAL_ERROR,[c.message,a]))}return n},M.prototype._handleMessage=function(e){this._trace("Client._handleMessage",e);try{switch(e.type){case r:if(this._connectTimeout.cancel(),this._reconnectTimeout&&this._reconnectTimeout.cancel(),this.connectOptions.cleanSession){for(var n in this._sentMessages){var u=this._sentMessages[n];t.removeItem("Sent:"+this._localKey+u.messageIdentifier)}for(var n in this._sentMessages={},this._receivedMessages){var f=this._receivedMessages[n];t.removeItem("Received:"+this._localKey+f.messageIdentifier)}this._receivedMessages={}}if(0!==e.returnCode){this._disconnected(_.CONNACK_RETURNCODE.code,m(_.CONNACK_RETURNCODE,[e.returnCode,b[e.returnCode]]));break}this.connected=!0,this.connectOptions.uris&&(this.hostIndex=this.connectOptions.uris.length);var h=[];for(var v in this._sentMessages)this._sentMessages.hasOwnProperty(v)&&h.push(this._sentMessages[v]);if(this._buffered_msg_queue.length>0)for(var g=null;g=this._buffered_msg_queue.pop();)h.push(g),this.onMessageDelivered&&(this._notify_msg_sent[g]=this.onMessageDelivered(g.payloadMessage));h=h.sort((function(e,t){return e.sequence-t.sequence}));for(var E=0,I=h.length;E<I;E++)if((u=h[E]).type==i&&u.pubRecReceived){var T=new w(a,{messageIdentifier:u.messageIdentifier});this._schedule_message(T)}else this._schedule_message(u);this.connectOptions.onSuccess&&this.connectOptions.onSuccess({invocationContext:this.connectOptions.invocationContext});var O=!1;this._reconnecting&&(O=!0,this._reconnectInterval=1,this._reconnecting=!1),this._connected(O,this._wsuri),this._process_queue();break;case i:this._receivePublish(e);break;case o:(u=this._sentMessages[e.messageIdentifier])&&(delete this._sentMessages[e.messageIdentifier],t.removeItem("Sent:"+this._localKey+e.messageIdentifier),this.onMessageDelivered&&this.onMessageDelivered(u.payloadMessage));break;case s:(u=this._sentMessages[e.messageIdentifier])&&(u.pubRecReceived=!0,T=new w(a,{messageIdentifier:e.messageIdentifier}),this.store("Sent:",u),this._schedule_message(T));break;case a:f=this._receivedMessages[e.messageIdentifier],t.removeItem("Received:"+this._localKey+e.messageIdentifier),f&&(this._receiveMessage(f),delete this._receivedMessages[e.messageIdentifier]);var S=new w(c,{messageIdentifier:e.messageIdentifier});this._schedule_message(S);break;case c:u=this._sentMessages[e.messageIdentifier],delete this._sentMessages[e.messageIdentifier],t.removeItem("Sent:"+this._localKey+e.messageIdentifier),this.onMessageDelivered&&this.onMessageDelivered(u.payloadMessage);break;case l:(u=this._sentMessages[e.messageIdentifier])&&(u.timeOut&&u.timeOut.cancel(),128===e.returnCode[0]?u.onFailure&&u.onFailure(e.returnCode):u.onSuccess&&u.onSuccess(e.returnCode),delete this._sentMessages[e.messageIdentifier]);break;case p:(u=this._sentMessages[e.messageIdentifier])&&(u.timeOut&&u.timeOut.cancel(),u.callback&&u.callback(),delete this._sentMessages[e.messageIdentifier]);break;case d:this.sendPinger.reset();break;case y:this._disconnected(_.INVALID_MQTT_MESSAGE_TYPE.code,m(_.INVALID_MQTT_MESSAGE_TYPE,[e.type]));break;default:this._disconnected(_.INVALID_MQTT_MESSAGE_TYPE.code,m(_.INVALID_MQTT_MESSAGE_TYPE,[e.type]))}}catch(A){var N="undefined"==A.hasOwnProperty("stack")?A.stack.toString():"No Error Stack Available";return void this._disconnected(_.INTERNAL_ERROR.code,m(_.INTERNAL_ERROR,[A.message,N]))}},M.prototype._on_socket_error=function(e){this._reconnecting||this._disconnected(_.SOCKET_ERROR.code,m(_.SOCKET_ERROR,[e.data]))},M.prototype._on_socket_close=function(){this._reconnecting||this._disconnected(_.SOCKET_CLOSE.code,m(_.SOCKET_CLOSE))},M.prototype._socket_send=function(e){if(1==e.type){var t=this._traceMask(e,"password");this._trace("Client._socket_send",t)}else this._trace("Client._socket_send",e);this.socket.send(e.encode()),this.sendPinger.reset()},M.prototype._receivePublish=function(e){switch(e.payloadMessage.qos){case"undefined":case 0:this._receiveMessage(e);break;case 1:var t=new w(o,{messageIdentifier:e.messageIdentifier});this._schedule_message(t),this._receiveMessage(e);break;case 2:this._receivedMessages[e.messageIdentifier]=e,this.store("Received:",e);var n=new w(s,{messageIdentifier:e.messageIdentifier});this._schedule_message(n);break;default:throw Error("Invaild qos="+e.payloadMessage.qos)}},M.prototype._receiveMessage=function(e){this.onMessageArrived&&this.onMessageArrived(e.payloadMessage)},M.prototype._connected=function(e,t){this.onConnected&&this.onConnected(e,t)},M.prototype._reconnect=function(){this._trace("Client._reconnect"),this.connected||(this._reconnecting=!0,this.sendPinger.cancel(),this.receivePinger.cancel(),this._reconnectInterval<128&&(this._reconnectInterval=2*this._reconnectInterval),this.connectOptions.uris?(this.hostIndex=0,this._doConnect(this.connectOptions.uris[0])):this._doConnect(this.uri))},M.prototype._disconnected=function(e,t){if(this._trace("Client._disconnected",e,t),void 0!==e&&this._reconnecting)this._reconnectTimeout=new P(this,this._reconnectInterval,this._reconnect);else if(this.sendPinger.cancel(),this.receivePinger.cancel(),this._connectTimeout&&(this._connectTimeout.cancel(),this._connectTimeout=null),this._msg_queue=[],this._buffered_msg_queue=[],this._notify_msg_sent={},this.socket&&(this.socket.onopen=null,this.socket.onmessage=null,this.socket.onerror=null,this.socket.onclose=null,1===this.socket.readyState&&this.socket.close(),delete this.socket),this.connectOptions.uris&&this.hostIndex<this.connectOptions.uris.length-1)this.hostIndex++,this._doConnect(this.connectOptions.uris[this.hostIndex]);else if(void 0===e&&(e=_.OK.code,t=m(_.OK)),this.connected){if(this.connected=!1,this.onConnectionLost&&this.onConnectionLost({errorCode:e,errorMessage:t,reconnect:this.connectOptions.reconnect,uri:this._wsuri}),e!==_.OK.code&&this.connectOptions.reconnect)return this._reconnectInterval=1,void this._reconnect()}else 4===this.connectOptions.mqttVersion&&!1===this.connectOptions.mqttVersionExplicit?(this._trace("Failed to connect V4, dropping back to V3"),this.connectOptions.mqttVersion=3,this.connectOptions.uris?(this.hostIndex=0,this._doConnect(this.connectOptions.uris[0])):this._doConnect(this.uri)):this.connectOptions.onFailure&&this.connectOptions.onFailure({invocationContext:this.connectOptions.invocationContext,errorCode:e,errorMessage:t})},M.prototype._trace=function(){if(this.traceFunction){var e=Array.prototype.slice.call(arguments);for(var t in e)"undefined"!==typeof e[t]&&e.splice(t,1,JSON.stringify(e[t]));var n=e.join("");this.traceFunction({severity:"Debug",message:n})}if(null!==this._traceBuffer){t=0;for(var r=arguments.length;t<r;t++)this._traceBuffer.length==this._MAX_TRACE_ENTRIES&&this._traceBuffer.shift(),0===t||"undefined"===typeof arguments[t]?this._traceBuffer.push(arguments[t]):this._traceBuffer.push("  "+JSON.stringify(arguments[t]))}},M.prototype._traceMask=function(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=r==t?"******":e[r]);return n};var L=function(e){var t,n;if(!("string"===typeof e||e instanceof ArrayBuffer||ArrayBuffer.isView(e)&&!(e instanceof DataView)))throw m(_.INVALID_ARGUMENT,[e,"newPayload"]);t=e;var r=0,i=!1,o=!1;Object.defineProperties(this,{payloadString:{enumerable:!0,get:function(){return"string"===typeof t?t:C(t,0,t.length)}},payloadBytes:{enumerable:!0,get:function(){if("string"===typeof t){var e=new ArrayBuffer(A(t)),n=new Uint8Array(e);return k(t,n,0),n}return t}},destinationName:{enumerable:!0,get:function(){return n},set:function(e){if("string"!==typeof e)throw new Error(m(_.INVALID_ARGUMENT,[e,"newDestinationName"]));n=e}},qos:{enumerable:!0,get:function(){return r},set:function(e){if(0!==e&&1!==e&&2!==e)throw new Error("Invalid argument:"+e);r=e}},retained:{enumerable:!0,get:function(){return i},set:function(e){if("boolean"!==typeof e)throw new Error(m(_.INVALID_ARGUMENT,[e,"newRetained"]));i=e}},topic:{enumerable:!0,get:function(){return n},set:function(e){n=e}},duplicate:{enumerable:!0,get:function(){return o},set:function(e){o=e}}})};return{Client:function(e,t,n,r){var i;if("string"!==typeof e)throw new Error(m(_.INVALID_TYPE,[typeof e,"host"]));if(2==arguments.length){r=t;var o=(i=e).match(/^(wss?):\/\/((\[(.+)\])|([^\/]+?))(:(\d+))?(\/.*)$/);if(!o)throw new Error(m(_.INVALID_ARGUMENT,[e,"host"]));e=o[4]||o[2],t=parseInt(o[7]),n=o[8]}else{if(3==arguments.length&&(r=n,n="/mqtt"),"number"!==typeof t||t<0)throw new Error(m(_.INVALID_TYPE,[typeof t,"port"]));if("string"!==typeof n)throw new Error(m(_.INVALID_TYPE,[typeof n,"path"]));var s=-1!==e.indexOf(":")&&"["!==e.slice(0,1)&&"]"!==e.slice(-1);i="ws://"+(s?"["+e+"]":e)+":"+t+n}for(var a=0,c=0;c<r.length;c++){var u=r.charCodeAt(c);55296<=u&&u<=56319&&c++,a++}if("string"!==typeof r||a>65535)throw new Error(m(_.INVALID_ARGUMENT,[r,"clientId"]));var l=new M(i,e,t,n,r);Object.defineProperties(this,{host:{get:function(){return e},set:function(){throw new Error(m(_.UNSUPPORTED_OPERATION))}},port:{get:function(){return t},set:function(){throw new Error(m(_.UNSUPPORTED_OPERATION))}},path:{get:function(){return n},set:function(){throw new Error(m(_.UNSUPPORTED_OPERATION))}},uri:{get:function(){return i},set:function(){throw new Error(m(_.UNSUPPORTED_OPERATION))}},clientId:{get:function(){return l.clientId},set:function(){throw new Error(m(_.UNSUPPORTED_OPERATION))}},onConnected:{get:function(){return l.onConnected},set:function(e){if("function"!==typeof e)throw new Error(m(_.INVALID_TYPE,[typeof e,"onConnected"]));l.onConnected=e}},disconnectedPublishing:{get:function(){return l.disconnectedPublishing},set:function(e){l.disconnectedPublishing=e}},disconnectedBufferSize:{get:function(){return l.disconnectedBufferSize},set:function(e){l.disconnectedBufferSize=e}},onConnectionLost:{get:function(){return l.onConnectionLost},set:function(e){if("function"!==typeof e)throw new Error(m(_.INVALID_TYPE,[typeof e,"onConnectionLost"]));l.onConnectionLost=e}},onMessageDelivered:{get:function(){return l.onMessageDelivered},set:function(e){if("function"!==typeof e)throw new Error(m(_.INVALID_TYPE,[typeof e,"onMessageDelivered"]));l.onMessageDelivered=e}},onMessageArrived:{get:function(){return l.onMessageArrived},set:function(e){if("function"!==typeof e)throw new Error(m(_.INVALID_TYPE,[typeof e,"onMessageArrived"]));l.onMessageArrived=e}},trace:{get:function(){return l.traceFunction},set:function(e){if("function"!==typeof e)throw new Error(m(_.INVALID_TYPE,[typeof e,"onTrace"]));l.traceFunction=e}}}),this.connect=function(e){if(v(e=e||{},{timeout:"number",userName:"string",password:"string",willMessage:"object",keepAliveInterval:"number",cleanSession:"boolean",useSSL:"boolean",invocationContext:"object",onSuccess:"function",onFailure:"function",hosts:"object",ports:"object",reconnect:"boolean",mqttVersion:"number",mqttVersionExplicit:"boolean",uris:"object"}),void 0===e.keepAliveInterval&&(e.keepAliveInterval=60),e.mqttVersion>4||e.mqttVersion<3)throw new Error(m(_.INVALID_ARGUMENT,[e.mqttVersion,"connectOptions.mqttVersion"]));if(void 0===e.mqttVersion?(e.mqttVersionExplicit=!1,e.mqttVersion=4):e.mqttVersionExplicit=!0,void 0!==e.password&&void 0===e.userName)throw new Error(m(_.INVALID_ARGUMENT,[e.password,"connectOptions.password"]));if(e.willMessage){if(!(e.willMessage instanceof L))throw new Error(m(_.INVALID_TYPE,[e.willMessage,"connectOptions.willMessage"]));if(e.willMessage.stringPayload=null,"undefined"===typeof e.willMessage.destinationName)throw new Error(m(_.INVALID_TYPE,[typeof e.willMessage.destinationName,"connectOptions.willMessage.destinationName"]))}if("undefined"===typeof e.cleanSession&&(e.cleanSession=!0),e.hosts){if(!(e.hosts instanceof Array))throw new Error(m(_.INVALID_ARGUMENT,[e.hosts,"connectOptions.hosts"]));if(e.hosts.length<1)throw new Error(m(_.INVALID_ARGUMENT,[e.hosts,"connectOptions.hosts"]));for(var t=!1,r=0;r<e.hosts.length;r++){if("string"!==typeof e.hosts[r])throw new Error(m(_.INVALID_TYPE,[typeof e.hosts[r],"connectOptions.hosts["+r+"]"]));if(/^(wss?):\/\/((\[(.+)\])|([^\/]+?))(:(\d+))?(\/.*)$/.test(e.hosts[r])){if(0===r)t=!0;else if(!t)throw new Error(m(_.INVALID_ARGUMENT,[e.hosts[r],"connectOptions.hosts["+r+"]"]))}else if(t)throw new Error(m(_.INVALID_ARGUMENT,[e.hosts[r],"connectOptions.hosts["+r+"]"]))}if(t)e.uris=e.hosts;else{if(!e.ports)throw new Error(m(_.INVALID_ARGUMENT,[e.ports,"connectOptions.ports"]));if(!(e.ports instanceof Array))throw new Error(m(_.INVALID_ARGUMENT,[e.ports,"connectOptions.ports"]));if(e.hosts.length!==e.ports.length)throw new Error(m(_.INVALID_ARGUMENT,[e.ports,"connectOptions.ports"]));for(e.uris=[],r=0;r<e.hosts.length;r++){if("number"!==typeof e.ports[r]||e.ports[r]<0)throw new Error(m(_.INVALID_TYPE,[typeof e.ports[r],"connectOptions.ports["+r+"]"]));var o=e.hosts[r],s=e.ports[r],a=-1!==o.indexOf(":");i="ws://"+(a?"["+o+"]":o)+":"+s+n,e.uris.push(i)}}}l.connect(e)},this.subscribe=function(e,t){if("string"!==typeof e&&e.constructor!==Array)throw new Error("Invalid argument:"+e);if(v(t=t||{},{qos:"number",invocationContext:"object",onSuccess:"function",onFailure:"function",timeout:"number"}),t.timeout&&!t.onFailure)throw new Error("subscribeOptions.timeout specified with no onFailure callback.");if("undefined"!==typeof t.qos&&0!==t.qos&&1!==t.qos&&2!==t.qos)throw new Error(m(_.INVALID_ARGUMENT,[t.qos,"subscribeOptions.qos"]));l.subscribe(e,t)},this.unsubscribe=function(e,t){if("string"!==typeof e&&e.constructor!==Array)throw new Error("Invalid argument:"+e);if(v(t=t||{},{invocationContext:"object",onSuccess:"function",onFailure:"function",timeout:"number"}),t.timeout&&!t.onFailure)throw new Error("unsubscribeOptions.timeout specified with no onFailure callback.");l.unsubscribe(e,t)},this.send=function(e,t,n,r){var i;if(0===arguments.length)throw new Error("Invalid argument.length");if(1==arguments.length){if(!(e instanceof L)&&"string"!==typeof e)throw new Error("Invalid argument:"+typeof e);if("undefined"===typeof(i=e).destinationName)throw new Error(m(_.INVALID_ARGUMENT,[i.destinationName,"Message.destinationName"]));l.send(i)}else(i=new L(t)).destinationName=e,arguments.length>=3&&(i.qos=n),arguments.length>=4&&(i.retained=r),l.send(i)},this.publish=function(e,t,n,r){var i;if(0===arguments.length)throw new Error("Invalid argument.length");if(1==arguments.length){if(!(e instanceof L)&&"string"!==typeof e)throw new Error("Invalid argument:"+typeof e);if("undefined"===typeof(i=e).destinationName)throw new Error(m(_.INVALID_ARGUMENT,[i.destinationName,"Message.destinationName"]));l.send(i)}else(i=new L(t)).destinationName=e,arguments.length>=3&&(i.qos=n),arguments.length>=4&&(i.retained=r),l.send(i)},this.disconnect=function(){l.disconnect()},this.getTraceLog=function(){return l.getTraceLog()},this.startTrace=function(){l.startTrace()},this.stopTrace=function(){l.stopTrace()},this.isConnected=function(){return l.connected}},Message:L}}("undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},e.exports=r()},9329:function(e,t,n){e.exports=n(516).Observable},516:function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}t.Observable=void 0;var o=function(){return"function"===typeof Symbol},s=function(e){return o()&&Boolean(Symbol[e])},a=function(e){return s(e)?Symbol[e]:"@@"+e};o()&&!s("observable")&&(Symbol.observable=Symbol("observable"));var c=a("iterator"),u=a("observable"),l=a("species");function f(e,t){var n=e[t];if(null!=n){if("function"!==typeof n)throw new TypeError(n+" is not a function");return n}}function p(e){var t=e.constructor;return void 0!==t&&null===(t=t[l])&&(t=void 0),void 0!==t?t:I}function h(e){return e instanceof I}function d(e){d.log?d.log(e):setTimeout((function(){throw e}))}function y(e){Promise.resolve().then((function(){try{e()}catch(t){d(t)}}))}function v(e){var t=e._cleanup;if(void 0!==t&&(e._cleanup=void 0,t))try{if("function"===typeof t)t();else{var n=f(t,"unsubscribe");n&&n.call(t)}}catch(r){d(r)}}function g(e){e._observer=void 0,e._queue=void 0,e._state="closed"}function _(e,t,n){e._state="running";var r=e._observer;try{var i=f(r,t);switch(t){case"next":i&&i.call(r,n);break;case"error":if(g(e),!i)throw n;i.call(r,n);break;case"complete":g(e),i&&i.call(r)}}catch(o){d(o)}"closed"===e._state?v(e):"running"===e._state&&(e._state="ready")}function b(e,t,n){if("closed"!==e._state){if("buffering"!==e._state)return"ready"!==e._state?(e._state="buffering",e._queue=[{type:t,value:n}],void y((function(){return function(e){var t=e._queue;if(t){e._queue=void 0,e._state="ready";for(var n=0;n<t.length&&(_(e,t[n].type,t[n].value),"closed"!==e._state);++n);}}(e)}))):void _(e,t,n);e._queue.push({type:t,value:n})}}var m=function(){function e(t,r){n(this,e),this._cleanup=void 0,this._observer=t,this._queue=void 0,this._state="initializing";var i=new E(this);try{this._cleanup=r.call(void 0,i)}catch(o){i.error(o)}"initializing"===this._state&&(this._state="ready")}return i(e,[{key:"unsubscribe",value:function(){"closed"!==this._state&&(g(this),v(this))}},{key:"closed",get:function(){return"closed"===this._state}}]),e}(),E=function(){function e(t){n(this,e),this._subscription=t}return i(e,[{key:"next",value:function(e){b(this._subscription,"next",e)}},{key:"error",value:function(e){b(this._subscription,"error",e)}},{key:"complete",value:function(){b(this._subscription,"complete")}},{key:"closed",get:function(){return"closed"===this._subscription._state}}]),e}(),I=function(){function e(t){if(n(this,e),!(this instanceof e))throw new TypeError("Observable cannot be called as a function");if("function"!==typeof t)throw new TypeError("Observable initializer must be a function");this._subscriber=t}return i(e,[{key:"subscribe",value:function(e){return"object"===typeof e&&null!==e||(e={next:e,error:arguments[1],complete:arguments[2]}),new m(e,this._subscriber)}},{key:"forEach",value:function(e){var t=this;return new Promise((function(n,r){if("function"===typeof e)var i=t.subscribe({next:function(t){try{e(t,o)}catch(n){r(n),i.unsubscribe()}},error:r,complete:n});else r(new TypeError(e+" is not a function"));function o(){i.unsubscribe(),n()}}))}},{key:"map",value:function(e){var t=this;if("function"!==typeof e)throw new TypeError(e+" is not a function");return new(p(this))((function(n){return t.subscribe({next:function(t){try{t=e(t)}catch(r){return n.error(r)}n.next(t)},error:function(e){n.error(e)},complete:function(){n.complete()}})}))}},{key:"filter",value:function(e){var t=this;if("function"!==typeof e)throw new TypeError(e+" is not a function");return new(p(this))((function(n){return t.subscribe({next:function(t){try{if(!e(t))return}catch(r){return n.error(r)}n.next(t)},error:function(e){n.error(e)},complete:function(){n.complete()}})}))}},{key:"reduce",value:function(e){var t=this;if("function"!==typeof e)throw new TypeError(e+" is not a function");var n=p(this),r=arguments.length>1,i=!1,o=arguments[1],s=o;return new n((function(n){return t.subscribe({next:function(t){var o=!i;if(i=!0,!o||r)try{s=e(s,t)}catch(a){return n.error(a)}else s=t},error:function(e){n.error(e)},complete:function(){if(!i&&!r)return n.error(new TypeError("Cannot reduce an empty sequence"));n.next(s),n.complete()}})}))}},{key:"concat",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=p(this);return new i((function(t){var r,o=0;return function e(s){r=s.subscribe({next:function(e){t.next(e)},error:function(e){t.error(e)},complete:function(){o===n.length?(r=void 0,t.complete()):e(i.from(n[o++]))}})}(e),function(){r&&(r.unsubscribe(),r=void 0)}}))}},{key:"flatMap",value:function(e){var t=this;if("function"!==typeof e)throw new TypeError(e+" is not a function");var n=p(this);return new n((function(r){var i=[],o=t.subscribe({next:function(t){if(e)try{t=e(t)}catch(a){return r.error(a)}var o=n.from(t).subscribe({next:function(e){r.next(e)},error:function(e){r.error(e)},complete:function(){var e=i.indexOf(o);e>=0&&i.splice(e,1),s()}});i.push(o)},error:function(e){r.error(e)},complete:function(){s()}});function s(){o.closed&&0===i.length&&r.complete()}return function(){i.forEach((function(e){return e.unsubscribe()})),o.unsubscribe()}}))}},{key:u,value:function(){return this}}],[{key:"from",value:function(t){var n="function"===typeof this?this:e;if(null==t)throw new TypeError(t+" is not an object");var r=f(t,u);if(r){var i=r.call(t);if(Object(i)!==i)throw new TypeError(i+" is not an object");return h(i)&&i.constructor===n?i:new n((function(e){return i.subscribe(e)}))}if(s("iterator")&&(r=f(t,c)))return new n((function(e){y((function(){if(!e.closed){var n=!0,i=!1,o=void 0;try{for(var s,a=r.call(t)[Symbol.iterator]();!(n=(s=a.next()).done);n=!0){var c=s.value;if(e.next(c),e.closed)return}}catch(u){i=!0,o=u}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}e.complete()}}))}));if(Array.isArray(t))return new n((function(e){y((function(){if(!e.closed){for(var n=0;n<t.length;++n)if(e.next(t[n]),e.closed)return;e.complete()}}))}));throw new TypeError(t+" is not observable")}},{key:"of",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i="function"===typeof this?this:e;return new i((function(e){y((function(){if(!e.closed){for(var t=0;t<n.length;++t)if(e.next(n[t]),e.closed)return;e.complete()}}))}))}},{key:l,get:function(){return this}}]),e}();t.Observable=I,o()&&Object.defineProperty(I,Symbol("extensions"),{value:{symbol:u,hostReportError:d},configurable:!0})}}]);